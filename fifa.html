<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Matthew Kuch">
<meta name="dcterms.date" content="2024-11-23">

<title>The FIFA World Cup</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="fifa_files/libs/clipboard/clipboard.min.js"></script>
<script src="fifa_files/libs/quarto-html/quarto.js"></script>
<script src="fifa_files/libs/quarto-html/popper.min.js"></script>
<script src="fifa_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="fifa_files/libs/quarto-html/anchor.min.js"></script>
<link href="fifa_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="fifa_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="fifa_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="fifa_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="fifa_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<style>

      .quarto-title-block .quarto-title-banner h1,
      .quarto-title-block .quarto-title-banner h2,
      .quarto-title-block .quarto-title-banner h3,
      .quarto-title-block .quarto-title-banner h4,
      .quarto-title-block .quarto-title-banner h5,
      .quarto-title-block .quarto-title-banner h6
      {
        color: black;
      }

      .quarto-title-block .quarto-title-banner {
        color: black;
background: #f0f3f5;
      }
</style>
<link href="fifa_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

<script src="fifa_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<link href="fifa_files/libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">

<script src="fifa_files/libs/datatables-binding-0.33/datatables.js"></script>

<script src="fifa_files/libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>

<link href="fifa_files/libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">

<link href="fifa_files/libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">

<script src="fifa_files/libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>

<link href="fifa_files/libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">

<script src="fifa_files/libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>

<link href="fifa_files/libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">

<script src="fifa_files/libs/selectize-0.12.0/selectize.min.js"></script>

<link href="fifa_files/libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">

<script src="fifa_files/libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>



<link rel="stylesheet" href="style.css">
</head>

<body>

<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">The FIFA World Cup</h1>
            <p class="subtitle lead">A recreation of Tanya Shapiro’s Dataviz</p>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Matthew Kuch <a href="mailto:kuch.matthew@gmail.com" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">November 23, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#load-the-required-libraries" id="toc-load-the-required-libraries" class="nav-link active" data-scroll-target="#load-the-required-libraries"><span class="header-section-number">1</span> Load the required libraries</a></li>
  <li><a href="#setup-the-nice-looking-fonts" id="toc-setup-the-nice-looking-fonts" class="nav-link" data-scroll-target="#setup-the-nice-looking-fonts"><span class="header-section-number">2</span> Setup the nice looking fonts</a></li>
  <li><a href="#webscraping-wikipedia-for-the-fifa-world-cup-data" id="toc-webscraping-wikipedia-for-the-fifa-world-cup-data" class="nav-link" data-scroll-target="#webscraping-wikipedia-for-the-fifa-world-cup-data"><span class="header-section-number">3</span> Webscraping wikipedia (for the FIFA world cup data)</a>
  <ul class="collapse">
  <li><a href="#setting-up-a-reference-table" id="toc-setting-up-a-reference-table" class="nav-link" data-scroll-target="#setting-up-a-reference-table"><span class="header-section-number">3.1</span> Setting up a reference table</a></li>
  <li><a href="#lets-first-get-1-table-for-1982-as-a-test-case" id="toc-lets-first-get-1-table-for-1982-as-a-test-case" class="nav-link" data-scroll-target="#lets-first-get-1-table-for-1982-as-a-test-case"><span class="header-section-number">3.2</span> Lets first get 1 table for 1982, as a test case</a></li>
  <li><a href="#helper-function-get_table" id="toc-helper-function-get_table" class="nav-link" data-scroll-target="#helper-function-get_table"><span class="header-section-number">3.3</span> Helper Function: <code>get_table()</code></a></li>
  <li><a href="#loop-through-all-the-years" id="toc-loop-through-all-the-years" class="nav-link" data-scroll-target="#loop-through-all-the-years"><span class="header-section-number">3.4</span> Loop through all the years</a></li>
  <li><a href="#post-scraping-data-cleaning" id="toc-post-scraping-data-cleaning" class="nav-link" data-scroll-target="#post-scraping-data-cleaning"><span class="header-section-number">3.5</span> Post scraping data cleaning</a>
  <ul class="collapse">
  <li><a href="#standardize-team-names" id="toc-standardize-team-names" class="nav-link" data-scroll-target="#standardize-team-names"><span class="header-section-number">3.5.1</span> <strong>Standardize Team Names</strong>:</a></li>
  <li><a href="#filter-frequent-participants" id="toc-filter-frequent-participants" class="nav-link" data-scroll-target="#filter-frequent-participants"><span class="header-section-number">3.5.2</span> <strong>Filter Frequent Participants</strong>:</a></li>
  <li><a href="#group-by-geographic-region" id="toc-group-by-geographic-region" class="nav-link" data-scroll-target="#group-by-geographic-region"><span class="header-section-number">3.5.3</span> Group by geographic region</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#data-wrangling-and-transformation" id="toc-data-wrangling-and-transformation" class="nav-link" data-scroll-target="#data-wrangling-and-transformation"><span class="header-section-number">4</span> Data wrangling and transformation</a>
  <ul class="collapse">
  <li><a href="#prepare-the-data-for-plotting" id="toc-prepare-the-data-for-plotting" class="nav-link" data-scroll-target="#prepare-the-data-for-plotting"><span class="header-section-number">4.1</span> Prepare the data for plotting</a>
  <ul class="collapse">
  <li><a href="#detailed-explanation-of-the-above-code-snippet-for-df_plot" id="toc-detailed-explanation-of-the-above-code-snippet-for-df_plot" class="nav-link" data-scroll-target="#detailed-explanation-of-the-above-code-snippet-for-df_plot"><span class="header-section-number">4.1.1</span> Detailed explanation of the above code snippet for df_plot</a></li>
  </ul></li>
  <li><a href="#pre-visualization-positioning-of-teams-on-y-axis-and-assigning-accessible-color-palettes-plus-other-adjustments" id="toc-pre-visualization-positioning-of-teams-on-y-axis-and-assigning-accessible-color-palettes-plus-other-adjustments" class="nav-link" data-scroll-target="#pre-visualization-positioning-of-teams-on-y-axis-and-assigning-accessible-color-palettes-plus-other-adjustments"><span class="header-section-number">4.2</span> Pre-visualization positioning of teams on y-axis and assigning accessible color palettes, plus other adjustments</a>
  <ul class="collapse">
  <li><a href="#create-unique-y-positions" id="toc-create-unique-y-positions" class="nav-link" data-scroll-target="#create-unique-y-positions"><span class="header-section-number">4.2.1</span> Create Unique Y Positions</a></li>
  <li><a href="#merge-the-y-positions-back-to-the-main-dataset" id="toc-merge-the-y-positions-back-to-the-main-dataset" class="nav-link" data-scroll-target="#merge-the-y-positions-back-to-the-main-dataset"><span class="header-section-number">4.2.2</span> Merge the Y Positions Back to the Main Dataset</a></li>
  <li><a href="#adjust-y-positions-for-spacing-between-geographic-groups" id="toc-adjust-y-positions-for-spacing-between-geographic-groups" class="nav-link" data-scroll-target="#adjust-y-positions-for-spacing-between-geographic-groups"><span class="header-section-number">4.2.3</span> Adjust Y Positions for Spacing Between Geographic Groups</a></li>
  <li><a href="#create-a-factor-for-achievement-groups" id="toc-create-a-factor-for-achievement-groups" class="nav-link" data-scroll-target="#create-a-factor-for-achievement-groups"><span class="header-section-number">4.2.4</span> Create a Factor for Achievement Groups</a></li>
  <li><a href="#define-a-color-palette" id="toc-define-a-color-palette" class="nav-link" data-scroll-target="#define-a-color-palette"><span class="header-section-number">4.2.5</span> Define a Color Palette</a></li>
  <li><a href="#manually-adjust-for-2002-south-korea-and-japan-hosting" id="toc-manually-adjust-for-2002-south-korea-and-japan-hosting" class="nav-link" data-scroll-target="#manually-adjust-for-2002-south-korea-and-japan-hosting"><span class="header-section-number">4.2.6</span> Manually Adjust for 2002 (South Korea and Japan Hosting)</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#create-the-heatmap-and-polish-it" id="toc-create-the-heatmap-and-polish-it" class="nav-link" data-scroll-target="#create-the-heatmap-and-polish-it"><span class="header-section-number">5</span> Create the heatmap and polish it</a>
  <ul class="collapse">
  <li><a href="#detailed-heatmap-plot-explanation" id="toc-detailed-heatmap-plot-explanation" class="nav-link" data-scroll-target="#detailed-heatmap-plot-explanation"><span class="header-section-number">5.1</span> Detailed Heatmap plot explanation</a>
  <ul class="collapse">
  <li><a href="#initial-plot" id="toc-initial-plot" class="nav-link" data-scroll-target="#initial-plot"><span class="header-section-number">5.1.1</span> Initial Plot</a></li>
  <li><a href="#add-heatmap-tiles" id="toc-add-heatmap-tiles" class="nav-link" data-scroll-target="#add-heatmap-tiles"><span class="header-section-number">5.1.2</span> Add Heatmap Tiles</a></li>
  <li><a href="#add-points-for-host-countries" id="toc-add-points-for-host-countries" class="nav-link" data-scroll-target="#add-points-for-host-countries"><span class="header-section-number">5.1.3</span> Add Points for Host Countries</a></li>
  <li><a href="#annotated-host-text" id="toc-annotated-host-text" class="nav-link" data-scroll-target="#annotated-host-text"><span class="header-section-number">5.1.4</span> Annotated Host Text</a></li>
  <li><a href="#add-an-arrow" id="toc-add-an-arrow" class="nav-link" data-scroll-target="#add-an-arrow"><span class="header-section-number">5.1.5</span> Add an arrow</a></li>
  <li><a href="#add-team-names" id="toc-add-team-names" class="nav-link" data-scroll-target="#add-team-names"><span class="header-section-number">5.1.6</span> Add Team names</a></li>
  <li><a href="#add-geographic-group-labels" id="toc-add-geographic-group-labels" class="nav-link" data-scroll-target="#add-geographic-group-labels"><span class="header-section-number">5.1.7</span> Add Geographic Group Labels</a></li>
  <li><a href="#customize-scales" id="toc-customize-scales" class="nav-link" data-scroll-target="#customize-scales"><span class="header-section-number">5.1.8</span> Customize scales</a></li>
  <li><a href="#customize-fill-colors" id="toc-customize-fill-colors" class="nav-link" data-scroll-target="#customize-fill-colors"><span class="header-section-number">5.1.9</span> Customize fill colors</a></li>
  <li><a href="#apply-themes" id="toc-apply-themes" class="nav-link" data-scroll-target="#apply-themes"><span class="header-section-number">5.1.10</span> Apply themes</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#add-text-and-annotations" id="toc-add-text-and-annotations" class="nav-link" data-scroll-target="#add-text-and-annotations"><span class="header-section-number">6</span> Add text and annotations</a>
  <ul class="collapse">
  <li><a href="#create-text" id="toc-create-text" class="nav-link" data-scroll-target="#create-text"><span class="header-section-number">6.1</span> Create text</a></li>
  <li><a href="#create-a-custom-legend" id="toc-create-a-custom-legend" class="nav-link" data-scroll-target="#create-a-custom-legend"><span class="header-section-number">6.2</span> Create a custom legend</a></li>
  <li><a href="#helper-function-to-make-image-transparent" id="toc-helper-function-to-make-image-transparent" class="nav-link" data-scroll-target="#helper-function-to-make-image-transparent"><span class="header-section-number">6.3</span> Helper function to make image transparent</a></li>
  <li><a href="#the-code-to-add-the-text-and-annotations" id="toc-the-code-to-add-the-text-and-annotations" class="nav-link" data-scroll-target="#the-code-to-add-the-text-and-annotations"><span class="header-section-number">6.4</span> The code to add the text and annotations</a></li>
  <li><a href="#final-plot" id="toc-final-plot" class="nav-link" data-scroll-target="#final-plot"><span class="header-section-number">6.5</span> Final plot</a></li>
  <li><a href="#save-the-final-image" id="toc-save-the-final-image" class="nav-link" data-scroll-target="#save-the-final-image"><span class="header-section-number">6.6</span> Save the final image</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content">





<p>This tutorial will walk you through in detail how to recreate Tanya Shapiro’s visualization below.</p>
<p><strong>I hope you enjoy this because at each stage of recreating this dataviz is like solving a puzzle!</strong></p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="./assets/fifa.png" class="img-fluid figure-img"></p>
<figcaption class="margin-caption">The goal is to recreate this</figcaption>
</figure>
</div>
<p>We’re going to re-engineer the above dataviz in 6 steps:</p>
<ol type="1">
<li>Load the required libraries</li>
<li>Setup the nice looking fonts</li>
<li>Webscraping wikipedia (for the FIFA world cup data)</li>
<li>Data wrangling and transformation (final step before visualization)</li>
<li>Create the heatmap and polish it</li>
<li>Add text and annotations</li>
</ol>
<section id="load-the-required-libraries" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Load the required libraries</h1>
<p>To accomplish the 6 steps above, the libraries that will help us are below :</p>
<ol type="i">
<li><p><strong>Data manipulation and visualization</strong>: tidyverse, RColorBrewer, viridis</p></li>
<li><p><strong>Fonts and text customization</strong>: sysfonts, showtext</p></li>
<li><p><strong>Specialized ggplot features</strong>: geomtextpath, ggimage, ggtext</p></li>
<li><p><strong>Webscraping:</strong> rvest</p></li>
<li><p><strong>Creating data tables:</strong> DT</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sysfonts)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(showtext)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(geomtextpath)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggimage)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggtext)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="setup-the-nice-looking-fonts" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Setup the nice looking fonts</h1>
<p>The custom fonts we’ll use for different parts of the visualization are as follows:</p>
<ul>
<li><p>The main text font is <strong>Roboto</strong> (downloaded via Google Fonts).</p></li>
<li><p>The title font is <strong>Cocon</strong>, which resembles FIFA branding.</p></li>
<li><p>The caption uses <strong>Font Awesome</strong> for social media icons.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>sysfonts<span class="sc">::</span><span class="fu">font_add_google</span>(<span class="st">"Roboto"</span>, <span class="st">"Roboto"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>sysfonts<span class="sc">::</span><span class="fu">font_add</span>(<span class="st">"Cocon"</span>, <span class="st">"./fonts/CoconRegularFont.otf"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>sysfonts<span class="sc">::</span><span class="fu">font_add</span>(<span class="st">"fb"</span>, <span class="st">"fonts/Font Awesome 6 Brands-Regular-400.otf"</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">showtext_auto</span>()</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>showtext<span class="sc">::</span><span class="fu">showtext_opts</span>(<span class="at">dpi =</span> <span class="dv">300</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="webscraping-wikipedia-for-the-fifa-world-cup-data" class="level1 page-columns page-full" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Webscraping wikipedia (for the FIFA world cup data)</h1>
<p>Now to the fun stuff, lets retrieve FIFA World Cup data from Wikipedia, using the rvest package for web scraping. The goal is to extract relevant tables from the Wikipedia pages for each tournament year.</p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="assets/fifa-wiki-1982-url.jpg" class="img-fluid figure-img"></p>
<figcaption class="margin-caption">URL for 1982 FIFA World Cup</figcaption>
</figure>
</div>
<section id="setting-up-a-reference-table" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="setting-up-a-reference-table"><span class="header-section-number">3.1</span> Setting up a reference table</h2>
<p>The reference table (<code>ref</code>) contains the following:</p>
<ul>
<li><p><strong><code>year</code></strong>: The years of the FIFA World Cup (1982–2018 in this example).</p></li>
<li><p><strong><code>index</code></strong>: The position of the table on each year’s Wikipedia page.</p></li>
<li><p><strong><code>host</code></strong>: The country that hosted the tournament in each year.</p></li>
<li><p><strong><code>link</code></strong>: The URL to the Wikipedia page for each year’s tournament.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>ref <span class="ot">=</span> <span class="fu">data.frame</span>(</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span> <span class="fu">c</span>(<span class="dv">1982</span>, <span class="dv">1986</span>, <span class="dv">1990</span>, <span class="dv">1994</span>, <span class="dv">1998</span>, <span class="dv">2002</span>, <span class="dv">2006</span>, <span class="dv">2010</span>, <span class="dv">2014</span>),</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">index =</span> <span class="fu">c</span>(<span class="dv">16</span>, <span class="dv">14</span>, <span class="dv">15</span>, <span class="dv">13</span>, <span class="dv">25</span>, <span class="dv">24</span>, <span class="dv">23</span>, <span class="dv">14</span>, <span class="dv">20</span>),</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">host =</span> <span class="fu">c</span>(<span class="st">"Spain"</span>, <span class="st">"Mexico"</span>, <span class="st">"Italy"</span>, <span class="st">"United States"</span>, <span class="st">"France"</span>,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>             <span class="st">"South Korea"</span>, <span class="st">"Germany"</span>, <span class="st">"South Africa"</span>, <span class="st">"Brazil"</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate links to all Wikipedia pages for these years</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>ref<span class="sc">$</span>link <span class="ot">=</span> <span class="fu">paste0</span>(<span class="st">"https://en.wikipedia.org/wiki/"</span>, ref<span class="sc">$</span>year, <span class="st">"_FIFA_World_Cup"</span>)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize the reference table </span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(ref, <span class="at">filter =</span> <span class="st">"top"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-4c691a1da60c8fecfc8a" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-4c691a1da60c8fecfc8a">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td><\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1982\" data-max=\"2014\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"13\" data-max=\"25\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["1","2","3","4","5","6","7","8","9"],[1982,1986,1990,1994,1998,2002,2006,2010,2014],[16,14,15,13,25,24,23,14,20],["Spain","Mexico","Italy","United States","France","South Korea","Germany","South Africa","Brazil"],["https://en.wikipedia.org/wiki/1982_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>year<\/th>\n      <th>index<\/th>\n      <th>host<\/th>\n      <th>link<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"year","targets":1},{"name":"index","targets":2},{"name":"host","targets":3},{"name":"link","targets":4}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>This ref table acts as a roadmap for the scraping function, specifying the exact URL and table position for each year.</p>
</section>
<section id="lets-first-get-1-table-for-1982-as-a-test-case" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="lets-first-get-1-table-for-1982-as-a-test-case"><span class="header-section-number">3.2</span> Lets first get 1 table for 1982, as a test case</h2>
<p>To test our web-scraping logic, lets first scrape the 1982 table:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 1: Get the URL and table index for the year 1982</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  url <span class="ot">=</span> ref<span class="sc">$</span>link[ref<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">1982</span>]</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  index <span class="ot">=</span> ref<span class="sc">$</span>index[ref<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">1982</span>]</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Step 2: Scrape the table from the Wikipedia page</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  data_1982 <span class="ot">=</span> url <span class="sc">%&gt;%</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">read_html</span>() <span class="sc">%&gt;%</span>                    <span class="co"># Read the HTML content of the page</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_elements</span>(<span class="st">"table.wikitable"</span>) <span class="sc">%&gt;%</span>  <span class="co"># Select all tables with the 'wikitable' class</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    .[index] <span class="sc">%&gt;%</span>                       <span class="co"># Pick the table based on the given index</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_table</span>() <span class="sc">%&gt;%</span>                   <span class="co"># Convert the table to a dataframe</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    .[[<span class="dv">1</span>]]                             <span class="co"># Extract the first element of the list</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3: Clean and format the table</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  data_1982 <span class="ot">=</span> data_1982 <span class="sc">%&gt;%</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">Pos =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span>                <span class="co"># Rename the first column to 'Pos' (Position)</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Pos, Team, L, W)            <span class="co"># Keep only Position, Team, Losses, and Wins columns</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualization the 1982 data table</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(data_1982, <span class="at">filter =</span> <span class="st">"top"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-2fd3723589ad21b16ff2" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-2fd3723589ad21b16ff2">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td><\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26"],["1","2","3","4","Eliminated in the second group stage","5","6","7","8","9","10","11","12","Eliminated in the first group stage","13","14","15","16","17","18","19","20","21","22","23","24"],["Italy","West Germany","Poland","France","Eliminated in the second group stage","Brazil","England","Soviet Union","Austria","Northern Ireland","Belgium","Argentina","Spain","Eliminated in the first group stage","Algeria","Hungary","Scotland","Yugoslavia","Cameroon","Honduras","Czechoslovakia","Peru","Kuwait","Chile","New Zealand","El Salvador"],["0","2","1","2","Eliminated in the second group stage","1","0","1","2","1","2","3","2","Eliminated in the first group stage","1","1","1","1","0","1","1","1","2","3","3","3"],["4","3","3","3","Eliminated in the second group stage","4","3","2","2","1","2","2","1","Eliminated in the first group stage","2","1","1","1","0","0","0","0","0","0","0","0"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Pos<\/th>\n      <th>Team<\/th>\n      <th>L<\/th>\n      <th>W<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Pos","targets":1},{"name":"Team","targets":2},{"name":"L","targets":3},{"name":"W","targets":4}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="helper-function-get_table" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="helper-function-get_table"><span class="header-section-number">3.3</span> Helper Function: <code>get_table()</code></h2>
<p>The function <code>get_table(year)</code> will perform the following steps:</p>
<ul>
<li><p>Retrieves the appropriate URL and table index for a given <code>year</code>.</p></li>
<li><p>Scrapes the specified table from the Wikipedia page.</p></li>
<li><p>Renames and selects the required columns: <strong>Position (<code>Pos</code>)</strong>, <strong>Team</strong>, <strong>Losses (<code>L</code>)</strong>, and <strong>Wins (<code>W</code>)</strong>.</p></li>
<li><p>Adds the <code>year</code> column to identify the tournament.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>get_table <span class="ot">&lt;-</span> <span class="cf">function</span>(year) {</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Step 1: Get the URL and table index for the year</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  url <span class="ot">=</span> ref<span class="sc">$</span>link[ref<span class="sc">$</span>year <span class="sc">==</span> year]</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  index <span class="ot">=</span> ref<span class="sc">$</span>index[ref<span class="sc">$</span>year <span class="sc">==</span> year]</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Step 2: Scrape the table from the Wikipedia page</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">=</span> url <span class="sc">%&gt;%</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">read_html</span>() <span class="sc">%&gt;%</span>                    <span class="co"># Read the HTML content of the page</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_elements</span>(<span class="st">"table.wikitable"</span>) <span class="sc">%&gt;%</span>  <span class="co"># Select all tables with the 'wikitable' class</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    .[index] <span class="sc">%&gt;%</span>                       <span class="co"># Pick the table based on the given index</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_table</span>() <span class="sc">%&gt;%</span>                   <span class="co"># Convert the table to a dataframe</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    .[[<span class="dv">1</span>]]                             <span class="co"># Extract the first element of the list</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Step 3: Clean and format the table</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">=</span> data <span class="sc">%&gt;%</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">Pos =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span>                <span class="co"># Rename the first column to 'Pos' (Position)</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Pos, Team, L, W)            <span class="co"># Keep only Position, Team, Losses, and Wins columns</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Step 4: Add the year column</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>  data<span class="sc">$</span>year <span class="ot">=</span> year</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(data)</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Explanation of key steps</strong>:</p>
<ul>
<li><p><strong>Scraping with <code>read_html</code> and <code>html_elements</code>:</strong> Reads the webpage and selects all tables with the <code>wikitable</code> CSS class (a standard for tables on Wikipedia).</p></li>
<li><p><strong>Indexing with <code>.[index]</code>:</strong> Extracts the specific table based on the <code>index</code> column in the <code>ref</code> table.</p></li>
<li><p><strong>Converting the table with <code>html_table</code>:</strong> Converts the HTML table into a tidy dataframe.</p></li>
<li><p><strong>Column selection and renaming:</strong> Cleans the scraped table by renaming and selecting only the required columns.</p></li>
</ul>
</section>
<section id="loop-through-all-the-years" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="loop-through-all-the-years"><span class="header-section-number">3.4</span> Loop through all the years</h2>
<p>The script below loops through all years in <code>ref$year</code>, applying <code>get_table()</code> to each year. The results are combined into a single dataframe (<code>data</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize an empty dataframe</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> <span class="fu">data.frame</span>()</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through each year and scrape the corresponding data</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> ref<span class="sc">$</span>year) {</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">=</span> <span class="fu">rbind</span>(data, <span class="fu">get_table</span>(i))</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize data table</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(data, <span class="at">filter =</span> <span class="st">"top"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-89afcca87c2cfca5d158" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-89afcca87c2cfca5d158">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td><\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1982\" data-max=\"2014\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276"],["1","2","3","4","Eliminated in the second group stage","5","6","7","8","9","10","11","12","Eliminated in the first group stage","13","14","15","16","17","18","19","20","21","22","23","24","1","2","3","4","Eliminated in the quarter-finals","5","6","7","8","Eliminated in the round of 16","9","10","11","12","13","14","15","16","Eliminated in the group stage","17","18","19","20","21","22","23","24","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","1","2","3","4","Eliminated in the quarterfinals","5","6","7","8","Eliminated in the round of 16","9","10","11","12","13","14","15","16","Eliminated in the group stage","17","18","19","20","21","22","23","24","1","2","3","4","Eliminated in the quarter-finals","5","6","7","8","Eliminated in the round of 16","9","10","11","12","13","14","15","16","Eliminated in the group stage","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","1","2","3","4","Eliminated in the quarter-finals","5","6","7","8","Eliminated in the round of 16","9","10","11","12","13","14","15","16","Eliminated in the group stage","17","18","19","20","21","22","23","24","25","25","27","28","28","30","31","32","1","2","3","4","Eliminated in the quarter-finals","5","6","7","8","Eliminated in the round of 16","9","10","11","12","13","14","15","16","Eliminated in the group stage","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","1","2","3","4",null,"5","6","7","8",null,"9","10","11","12","13","14","15","16",null,"17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32"],["Italy","West Germany","Poland","France","Eliminated in the second group stage","Brazil","England","Soviet Union","Austria","Northern Ireland","Belgium","Argentina","Spain","Eliminated in the first group stage","Algeria","Hungary","Scotland","Yugoslavia","Cameroon","Honduras","Czechoslovakia","Peru","Kuwait","Chile","New Zealand","El Salvador","Argentina","West Germany","France","Belgium","Eliminated in the quarter-finals","Brazil","Mexico","Spain","England","Eliminated in the round of 16","Denmark","Soviet Union","Morocco","Italy","Paraguay","Poland","Bulgaria","Uruguay","Eliminated in the group stage","Portugal","Hungary","Scotland","South Korea","Northern Ireland","Algeria","Iraq","Canada","West Germany","Argentina","Italy","England","Yugoslavia","Czechoslovakia","Cameroon","Republic of Ireland","Brazil","Spain","Belgium","Romania","Costa Rica","Colombia","Netherlands","Uruguay","Soviet Union","Austria","Scotland","Egypt","Sweden","South Korea","United States","United Arab Emirates","Brazil","Italy","Sweden","Bulgaria","Eliminated in the quarterfinals","Germany","Romania","Netherlands","Spain","Eliminated in the round of 16","Nigeria","Argentina","Belgium","Saudi Arabia","Mexico","United States","Switzerland","Republic of Ireland","Eliminated in the group stage","Norway","Russia","Colombia","South Korea","Bolivia","Cameroon","Morocco","Greece","France","Brazil","Croatia","Netherlands","Eliminated in the quarter-finals","Italy","Argentina","Germany","Denmark","Eliminated in the round of 16","England","FR Yugoslavia","Romania","Nigeria","Mexico","Paraguay","Norway","Chile","Eliminated in the group stage","Spain","Morocco","Belgium","Iran","Colombia","Jamaica","Austria","South Africa","Cameroon","Tunisia","Scotland","Saudi Arabia","Bulgaria","South Korea","Japan","United States","Brazil","Germany","Turkey","South Korea","Spain","England","Senegal","United States","Japan","Denmark","Mexico","Republic of Ireland","Sweden","Belgium","Italy","Paraguay","South Africa","Argentina","Costa Rica","Cameroon","Portugal","Russia","Croatia","Ecuador","Poland","Uruguay","Nigeria","France","Tunisia","Slovenia","China","Saudi Arabia","Italy","France","Germany","Portugal","Eliminated in the quarter-finals","Brazil","Argentina","England","Ukraine","Eliminated in the round of 16","Spain","Switzerland","Netherlands","Ecuador","Ghana","Sweden","Mexico","Australia","Eliminated in the group stage","South Korea","Paraguay","Ivory Coast","Czech Republic","Poland","Croatia","Angola","Tunisia","Iran","United States","Trinidad and Tobago","Japan","Saudi Arabia","Togo","Costa Rica","Serbia and Montenegro","Spain","Netherlands","Germany","Uruguay","Eliminated in the quarter-finals","Argentina","Brazil","Ghana","Paraguay","Eliminated in the round of 16","Japan","Chile","Portugal","United States","England","Mexico","South Korea","Slovakia","Eliminated in the group stage","Ivory Coast","Slovenia","Switzerland","South Africa","Australia","New Zealand","Serbia","Denmark","Greece","Italy","Nigeria","Algeria","France","Honduras","Cameroon","North Korea","Germany","Argentina","Netherlands","Brazil (H)","","Colombia","Belgium","France","Costa Rica","","Chile","Mexico","Switzerland","Uruguay","Greece","Algeria","United States","Nigeria","","Ecuador","Portugal","Croatia","Bosnia and Herzegovina","Ivory Coast","Italy","Spain","Russia","Ghana","England","South Korea","Iran","Japan","Australia","Honduras","Cameroon"],["0","2","1","2","Eliminated in the second group stage","1","0","1","2","1","2","3","2","Eliminated in the first group stage","1","1","1","1","0","1","1","1","2","3","3","3","0","2","1","3","Eliminated in the quarter-finals","0","0","1","2","Eliminated in the round of 16","1","1","1","1","1","2","2","2","Eliminated in the group stage","2","2","2","2","2","2","3","3","0","2","0","1","1","2","2","1","1","1","2","1","2","2","1","2","2","2","2","1","3","3","3","3","0","1","1","3","Eliminated in the quarterfinals","1","1","2","1","Eliminated in the round of 16","2","2","2","2","1","2","2","2","Eliminated in the group stage","1","2","2","1","2","2","3","3","0","2","2","1","Eliminated in the quarter-finals","0","1","1","2","Eliminated in the round of 16","1","1","1","2","1","1","1","1","Eliminated in the group stage","1","1","0","2","2","2","1","1","1","2","2","2","2","2","3","3","0","1","2","2","0","1","1","2","1","1","1","0","1","1","2","2","1","1","1","1","2","2","2","2","2","1","2","2","2","3","3","3","0","0","1","2","Eliminated in the quarter-finals","1","0","0","2","Eliminated in the round of 16","1","0","1","2","2","1","2","2","Eliminated in the group stage","1","2","2","2","2","1","1","2","2","2","2","2","2","3","3","3","1","1","2","2","Eliminated in the quarter-finals","1","1","1","1","Eliminated in the round of 16","1","2","1","1","1","2","2","2","Eliminated in the group stage","1","1","1","1","1","0","2","2","2","1","2","2","2","2","3","3","0","1","0","2",null,"1","1","1","0",null,"1","1","2","2","1","2","2","2",null,"1","1","2","2","2","2","2","1","2","2","2","2","2","3","3","3"],["4","3","3","3","Eliminated in the second group stage","4","3","2","2","1","2","2","1","Eliminated in the first group stage","2","1","1","1","0","0","0","0","0","0","0","0","6","3","4","2","Eliminated in the quarter-finals","4","3","3","2","Eliminated in the round of 16","3","2","1","1","1","1","0","0","Eliminated in the group stage","1","1","0","0","0","0","0","0","5","2","6","3","3","3","3","0","3","2","2","1","2","1","0","1","1","1","1","0","0","0","0","0","5","4","3","3","Eliminated in the quarterfinals","3","3","3","2","Eliminated in the round of 16","2","2","2","2","1","1","1","1","Eliminated in the group stage","1","1","1","0","0","0","0","0","6","4","5","3","Eliminated in the quarter-finals","3","3","3","2","Eliminated in the round of 16","2","2","2","2","1","1","1","0","Eliminated in the group stage","1","1","0","1","1","1","0","0","0","0","0","0","0","0","0","0","7","5","4","3","3","2","2","2","2","2","2","1","1","1","1","1","1","1","1","1","1","1","1","1","1","0","0","0","0","0","0","0","5","4","5","4","Eliminated in the quarter-finals","4","3","3","2","Eliminated in the round of 16","3","2","2","2","2","1","1","1","Eliminated in the group stage","1","1","1","1","1","0","0","0","0","0","0","0","0","0","0","0","6","6","5","3","Eliminated in the quarter-finals","4","3","2","1","Eliminated in the round of 16","2","2","1","1","1","1","1","1","Eliminated in the group stage","1","1","1","1","1","0","1","1","1","0","0","0","0","0","0","0","6","5","5","3",null,"4","4","3","2",null,"2","2","2","2","1","1","1","1",null,"1","1","1","1","1","1","1","0","0","0","0","0","0","0","0","0"],[1982,1982,1982,1982,1982,1982,1982,1982,1982,1982,1982,1982,1982,1982,1982,1982,1982,1982,1982,1982,1982,1982,1982,1982,1982,1982,1986,1986,1986,1986,1986,1986,1986,1986,1986,1986,1986,1986,1986,1986,1986,1986,1986,1986,1986,1986,1986,1986,1986,1986,1986,1986,1986,1990,1990,1990,1990,1990,1990,1990,1990,1990,1990,1990,1990,1990,1990,1990,1990,1990,1990,1990,1990,1990,1990,1990,1990,1994,1994,1994,1994,1994,1994,1994,1994,1994,1994,1994,1994,1994,1994,1994,1994,1994,1994,1994,1994,1994,1994,1994,1994,1994,1994,1994,1998,1998,1998,1998,1998,1998,1998,1998,1998,1998,1998,1998,1998,1998,1998,1998,1998,1998,1998,1998,1998,1998,1998,1998,1998,1998,1998,1998,1998,1998,1998,1998,1998,1998,1998,2002,2002,2002,2002,2002,2002,2002,2002,2002,2002,2002,2002,2002,2002,2002,2002,2002,2002,2002,2002,2002,2002,2002,2002,2002,2002,2002,2002,2002,2002,2002,2002,2006,2006,2006,2006,2006,2006,2006,2006,2006,2006,2006,2006,2006,2006,2006,2006,2006,2006,2006,2006,2006,2006,2006,2006,2006,2006,2006,2006,2006,2006,2006,2006,2006,2006,2006,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Pos<\/th>\n      <th>Team<\/th>\n      <th>L<\/th>\n      <th>W<\/th>\n      <th>year<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":5},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Pos","targets":1},{"name":"Team","targets":2},{"name":"L","targets":3},{"name":"W","targets":4},{"name":"year","targets":5}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="post-scraping-data-cleaning" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="post-scraping-data-cleaning"><span class="header-section-number">3.5</span> Post scraping data cleaning</h2>
<section id="standardize-team-names" class="level3" data-number="3.5.1">
<h3 data-number="3.5.1" class="anchored" data-anchor-id="standardize-team-names"><span class="header-section-number">3.5.1</span> <strong>Standardize Team Names</strong>:</h3>
<ul>
<li>West Germany is relabeled as Germany for consistency.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Team =</span> <span class="fu">case_when</span>(Team <span class="sc">==</span> <span class="st">"West Germany"</span> <span class="sc">~</span> <span class="st">"Germany"</span>, <span class="cn">TRUE</span> <span class="sc">~</span> Team))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="filter-frequent-participants" class="level3" data-number="3.5.2">
<h3 data-number="3.5.2" class="anchored" data-anchor-id="filter-frequent-participants"><span class="header-section-number">3.5.2</span> <strong>Filter Frequent Participants</strong>:</h3>
<ul>
<li>Only keep teams that participated in at least 4 tournaments.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>teams <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Team) <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">wc =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(wc <span class="sc">&gt;</span> <span class="dv">3</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize teams</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(teams, <span class="at">filter =</span> <span class="st">"top"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-673da00773243ee73d47" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-673da00773243ee73d47">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td><\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"4\" data-max=\"9\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32"],["Algeria","Argentina","Belgium","Brazil","Cameroon","Chile","Colombia","Costa Rica","Croatia","Denmark","Eliminated in the group stage","Eliminated in the quarter-finals","Eliminated in the round of 16","England","France","Germany","Italy","Japan","Mexico","Netherlands","Nigeria","Paraguay","Poland","Portugal","Saudi Arabia","Scotland","South Korea","Spain","Sweden","Switzerland","United States","Uruguay"],[4,9,7,8,7,4,4,4,4,4,5,4,5,8,7,9,9,5,7,6,5,5,4,5,4,4,8,9,4,4,7,5]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Team<\/th>\n      <th>wc<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":2},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Team","targets":1},{"name":"wc","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><strong>Purpose</strong>:</p>
<ul>
<li>This ensures the visualization focuses on teams with a significant history in the World Cup</li>
</ul>
</section>
<section id="group-by-geographic-region" class="level3" data-number="3.5.3">
<h3 data-number="3.5.3" class="anchored" data-anchor-id="group-by-geographic-region"><span class="header-section-number">3.5.3</span> Group by geographic region</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>geo_group <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">country =</span> <span class="fu">c</span>(<span class="st">"Italy"</span>,<span class="st">"Germany"</span>,<span class="st">"England"</span>,<span class="st">"Norway"</span>,<span class="st">"Sweden"</span>,<span class="st">"Switzerland"</span>,<span class="st">"Netherlands"</span>,<span class="st">"France"</span>,<span class="st">"Belgium"</span>,</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>              <span class="st">"Spain"</span>,<span class="st">"Croatia"</span>,<span class="st">"Poland"</span>,<span class="st">"Portugal"</span>,<span class="st">"Denmark"</span>,<span class="st">"Russia"</span>,<span class="st">"Scotland"</span>,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>              <span class="st">"United States"</span>,<span class="st">"Argentina"</span>,<span class="st">"Brazil"</span>,<span class="st">"Paraguay"</span>,<span class="st">"Uruguay"</span>,<span class="st">"Costa Rica"</span>,<span class="st">"Colombia"</span>,<span class="st">"Chile"</span>,<span class="st">"Mexico"</span>,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>              <span class="st">"Nigeria"</span>,<span class="st">"Cameroon"</span>,<span class="st">"Saudi Arabia"</span>,<span class="st">"South Korea"</span>,<span class="st">"Japan"</span>,<span class="st">"Iran"</span>,<span class="st">"Morocco"</span>,<span class="st">"Algeria"</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">geo =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"Europe"</span>,<span class="dv">16</span>), <span class="fu">rep</span>(<span class="st">"Americas"</span>,<span class="dv">9</span>), <span class="fu">rep</span>(<span class="st">"Other"</span>,<span class="dv">8</span>))</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co">#Create Factor for Continent to arrange in order</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>geo_group<span class="sc">$</span>geo<span class="ot">&lt;-</span><span class="fu">factor</span>(geo_group<span class="sc">$</span>geo, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">"Europe"</span>,<span class="st">"Americas"</span>,<span class="st">"Other"</span>))</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize geo grouping table</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(geo_group, <span class="at">filter =</span> <span class="st">"top"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-e3896373cce22b00ebdb" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-e3896373cce22b00ebdb">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td><\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Europe&quot;,&quot;Americas&quot;,&quot;Other&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33"],["Italy","Germany","England","Norway","Sweden","Switzerland","Netherlands","France","Belgium","Spain","Croatia","Poland","Portugal","Denmark","Russia","Scotland","United States","Argentina","Brazil","Paraguay","Uruguay","Costa Rica","Colombia","Chile","Mexico","Nigeria","Cameroon","Saudi Arabia","South Korea","Japan","Iran","Morocco","Algeria"],["Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Other","Other","Other","Other","Other","Other","Other","Other"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>country<\/th>\n      <th>geo<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"country","targets":1},{"name":"geo","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>The <code>geo_group</code> dataframe is created to group the countries (teams) into geographic regions (e.g., Europe, Americas, Other). These groupings will later be used to:</p>
<ol type="1">
<li><p><strong>Color-code</strong> teams by region.</p></li>
<li><p><strong>Create section labels in the visualization</strong> (e.g., “Europe”, “Americas”, “Other”).</p></li>
</ol>
</section>
</section>
</section>
<section id="data-wrangling-and-transformation" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Data wrangling and transformation</h1>
<section id="prepare-the-data-for-plotting" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="prepare-the-data-for-plotting"><span class="header-section-number">4.1</span> Prepare the data for plotting</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>df_plot <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">"Eliminated"</span>, Pos) <span class="sc">&amp;</span> Team <span class="sc">%in%</span> teams<span class="sc">$</span>Team) <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(teams, <span class="at">by =</span> <span class="st">"Team"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(geo_group, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Team"</span> <span class="ot">=</span> <span class="st">"country"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(ref, <span class="at">by =</span> <span class="st">"year"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">complete</span>(<span class="at">Team =</span> teams<span class="sc">$</span>Team) <span class="sc">%&gt;%</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">"Eliminated"</span>, Team)) <span class="sc">%&gt;%</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">counter =</span> <span class="dv">1</span>,</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">Pos =</span> <span class="fu">as.integer</span>(Pos),</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">group =</span> <span class="fu">case_when</span>(</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>           <span class="fu">is.na</span>(Pos) <span class="sc">~</span> <span class="st">"Not Present"</span>,</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>           Pos <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"Win"</span>,</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>           Pos <span class="sc">&lt;=</span> <span class="dv">4</span> <span class="sc">~</span> <span class="st">"Semi Finals"</span>,</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>           Pos <span class="sc">&lt;=</span> <span class="dv">8</span> <span class="sc">~</span> <span class="st">"Quarter Finals"</span>,</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>           Pos <span class="sc">&lt;=</span> <span class="dv">16</span> <span class="sc">~</span> <span class="st">"Round of 16"</span>,</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>           Pos <span class="sc">&lt;=</span> <span class="dv">32</span> <span class="sc">~</span> <span class="st">"Group Stage"</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>         )) <span class="sc">%&gt;%</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Team) <span class="sc">%&gt;%</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Team, year) <span class="sc">%&gt;%</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">wc =</span> <span class="fu">sum</span>(counter[group <span class="sc">!=</span> <span class="st">"Not Present"</span>]),</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>         <span class="at">win =</span> <span class="fu">sum</span>(counter[group <span class="sc">==</span> <span class="st">"Win"</span>])) <span class="sc">%&gt;%</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(geo, <span class="sc">-</span>wc, <span class="sc">-</span>win, Team) <span class="sc">%&gt;%</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(df_plot, <span class="at">filter =</span> <span class="st">"top"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-3e307aa9b17740829d0e" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-3e307aa9b17740829d0e">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td><\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1982\" data-max=\"2014\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1\" data-max=\"32\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"4\" data-max=\"9\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Europe&quot;,&quot;Americas&quot;,&quot;Other&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"13\" data-max=\"25\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"1\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"2\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261"],[1982,1986,1990,1994,1998,2002,2006,2010,2014,1982,1986,1990,1994,1998,2002,2006,2010,2014,1982,1986,1990,1994,1998,2002,2006,2010,2014,1982,1986,1990,1998,2002,2006,2010,2014,1982,1986,1998,2002,2006,2010,2014,1982,1986,1990,1994,1998,2002,2014,1990,1994,1998,2006,2010,2014,1986,2002,2006,2010,2014,1998,2002,2006,2014,1986,1998,2002,2010,1982,1986,2002,2006,1982,1986,1990,1998,1990,1994,2002,2006,1994,2006,2010,2014,1982,1986,1990,1994,1998,2002,2006,2010,2014,1982,1986,1990,1994,1998,2002,2006,2010,1986,1994,1998,2002,2006,2010,2014,1990,1994,1998,2002,2006,2010,2014,1986,1998,2002,2006,2010,1986,1990,2002,2010,2014,1982,1998,2010,2014,1990,1994,1998,2014,1990,2002,2006,2014,1986,1990,1994,1998,2002,2006,2010,2014,1982,1990,1994,1998,2002,2010,2014,1998,2002,2006,2010,2014,1994,1998,2002,2010,2014,1982,1986,2010,2014,1994,1998,2002,2006,2014,1994,1982,1990,1994,2006,2010,1986,2006,1982,1990,1982,1986,1982,1986,2002,1982,1986,1990,1994,1982,1986,1990,2006,1982,1990,1994,2014,1982,1990,1994,1998,1982,1994,1998,2006,1990,1994,1998,2002,2006,1986,1990,1994,2002,2006,1982,1986,2002,2006,2010,1982,1986,1994,1998,2010,1982,1986,1990,1994,2010,1982,1990,1994,2006,2014,1990,1994,1998,2010,2014,1982,1986,1990,2010,2014,1994,2002,2006,2010,2014,1982,1986,1998,2010,2014,1982,1986,1990,1998,2002],["Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","England","England","England","England","England","England","England","England","France","France","France","France","France","France","France","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Portugal","Portugal","Portugal","Portugal","Portugal","Croatia","Croatia","Croatia","Croatia","Denmark","Denmark","Denmark","Denmark","Poland","Poland","Poland","Poland","Scotland","Scotland","Scotland","Scotland","Sweden","Sweden","Sweden","Sweden","Switzerland","Switzerland","Switzerland","Switzerland","Argentina","Argentina","Argentina","Argentina","Argentina","Argentina","Argentina","Argentina","Argentina","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Mexico","Mexico","Mexico","Mexico","Mexico","Mexico","Mexico","United States","United States","United States","United States","United States","United States","United States","Paraguay","Paraguay","Paraguay","Paraguay","Paraguay","Uruguay","Uruguay","Uruguay","Uruguay","Uruguay","Chile","Chile","Chile","Chile","Colombia","Colombia","Colombia","Colombia","Costa Rica","Costa Rica","Costa Rica","Costa Rica","South Korea","South Korea","South Korea","South Korea","South Korea","South Korea","South Korea","South Korea","Cameroon","Cameroon","Cameroon","Cameroon","Cameroon","Cameroon","Cameroon","Japan","Japan","Japan","Japan","Japan","Nigeria","Nigeria","Nigeria","Nigeria","Nigeria","Algeria","Algeria","Algeria","Algeria","Saudi Arabia","Saudi Arabia","Saudi Arabia","Saudi Arabia","Brazil","England","South Korea","France","France","Belgium","Belgium","Cameroon","Cameroon","Mexico","Mexico","United States","United States","Netherlands","Netherlands","Netherlands","Japan","Japan","Japan","Japan","Nigeria","Nigeria","Nigeria","Nigeria","Paraguay","Paraguay","Paraguay","Paraguay","Portugal","Portugal","Portugal","Portugal","Uruguay","Uruguay","Uruguay","Uruguay","Algeria","Algeria","Algeria","Algeria","Algeria","Chile","Chile","Chile","Chile","Chile","Colombia","Colombia","Colombia","Colombia","Colombia","Costa Rica","Costa Rica","Costa Rica","Costa Rica","Costa Rica","Croatia","Croatia","Croatia","Croatia","Croatia","Denmark","Denmark","Denmark","Denmark","Denmark","Poland","Poland","Poland","Poland","Poland","Saudi Arabia","Saudi Arabia","Saudi Arabia","Saudi Arabia","Saudi Arabia","Scotland","Scotland","Scotland","Scotland","Scotland","Sweden","Sweden","Sweden","Sweden","Sweden","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland"],[2,2,1,5,7,2,3,3,1,1,12,3,2,5,15,1,26,22,12,7,10,8,17,5,9,1,23,6,8,4,9,6,7,13,26,4,3,1,28,2,29,7,10,4,11,11,19,14,6,15,7,4,11,2,3,17,21,4,11,18,3,23,22,19,9,8,10,24,3,14,25,21,15,19,19,27,21,3,13,14,15,10,19,11,11,1,2,10,6,18,6,5,2,5,5,9,1,2,1,5,6,6,13,13,11,15,14,10,23,14,32,8,25,12,15,13,14,16,18,8,16,16,26,4,12,22,16,10,9,14,19,21,5,13,19,31,8,20,22,20,30,4,17,15,27,17,7,22,25,20,31,32,31,9,28,9,29,9,12,27,27,16,13,22,28,14,12,28,32,28,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],["2","2","0","1","1","1","1","2","0","0","1","0","1","0","2","0","1","2","2","1","1","1","1","0","1","1","2","0","2","1","1","1","0","1","2","2","1","0","2","0","2","1","2","3","2","2","0","1","1","1","2","1","1","1","0","2","2","2","1","1","2","2","1","2","1","2","1","2","1","2","2","2","1","2","2","2","3","1","1","1","2","0","1","2","3","0","2","2","1","1","0","1","1","1","0","1","0","2","0","1","1","0","1","1","1","2","2","1","3","2","3","2","2","1","2","1","1","2","2","1","2","2","1","2","2","3","1","2","1","2","2","2","1","2","1","3","0","2","3","1","2","2","1","2","2","0","2","2","1","1","3","3","3","1","2","1","2","2","2","2","2","2","1","2","2","2","2","2","3","2",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],["3","3","5","3","3","5","5","5","6","4","1","6","4","3","1","5","0","1","1","3","2","2","1","3","3","6","1","3","2","3","2","2","3","1","0","3","4","6","0","4","0","3","2","2","2","2","0","1","4","0","3","3","2","6","5","1","1","4","1","1","5","1","0","1","3","2","2","1","3","1","1","1","1","0","1","0","0","3","1","1","1","2","1","2","2","6","2","2","3","1","3","4","5","4","4","3","5","4","7","4","3","3","1","1","2","1","1","2","0","1","0","2","0","1","1","1","1","1","1","1","0","1","0","3","2","0","0","2","2","1","1","1","4","2","1","0","2","0","0","0","0","3","1","1","0","0","3","0","0","1","0","0","0","2","0","2","0","2","2","0","0","1","2","0","0","1","2","0","0","0",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,8,8,8,8,8,8,8,8,7,7,7,7,7,7,7,7,7,7,7,7,7,7,6,6,6,6,6,6,5,5,5,5,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,9,9,9,9,9,9,9,9,8,8,8,8,8,8,8,8,7,7,7,7,7,7,7,7,7,7,7,7,7,7,5,5,5,5,5,5,5,5,5,5,4,4,4,4,4,4,4,4,4,4,4,4,8,8,8,8,8,8,8,8,7,7,7,7,7,7,7,5,5,5,5,5,5,5,5,5,5,4,4,4,4,4,4,4,4,8,8,8,7,7,7,7,7,7,7,7,7,7,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],["Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[16,14,15,13,25,24,23,14,20,16,14,15,13,25,24,23,14,20,16,14,15,13,25,24,23,14,20,16,14,15,25,24,23,14,20,16,14,25,24,23,14,20,16,14,15,13,25,24,20,15,13,25,23,14,20,14,24,23,14,20,25,24,23,20,14,25,24,14,16,14,24,23,16,14,15,25,15,13,24,23,13,23,14,20,16,14,15,13,25,24,23,14,20,16,14,15,13,25,24,23,14,14,13,25,24,23,14,20,15,13,25,24,23,14,20,14,25,24,23,14,14,15,24,14,20,16,25,14,20,15,13,25,20,15,24,23,20,14,15,13,25,24,23,14,20,16,15,13,25,24,14,20,25,24,23,14,20,13,25,24,14,20,16,14,14,20,13,25,24,23,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],["Spain","Mexico","Italy","United States","France","South Korea","Germany","South Africa","Brazil","Spain","Mexico","Italy","United States","France","South Korea","Germany","South Africa","Brazil","Spain","Mexico","Italy","United States","France","South Korea","Germany","South Africa","Brazil","Spain","Mexico","Italy","France","South Korea","Germany","South Africa","Brazil","Spain","Mexico","France","South Korea","Germany","South Africa","Brazil","Spain","Mexico","Italy","United States","France","South Korea","Brazil","Italy","United States","France","Germany","South Africa","Brazil","Mexico","South Korea","Germany","South Africa","Brazil","France","South Korea","Germany","Brazil","Mexico","France","South Korea","South Africa","Spain","Mexico","South Korea","Germany","Spain","Mexico","Italy","France","Italy","United States","South Korea","Germany","United States","Germany","South Africa","Brazil","Spain","Mexico","Italy","United States","France","South Korea","Germany","South Africa","Brazil","Spain","Mexico","Italy","United States","France","South Korea","Germany","South Africa","Mexico","United States","France","South Korea","Germany","South Africa","Brazil","Italy","United States","France","South Korea","Germany","South Africa","Brazil","Mexico","France","South Korea","Germany","South Africa","Mexico","Italy","South Korea","South Africa","Brazil","Spain","France","South Africa","Brazil","Italy","United States","France","Brazil","Italy","South Korea","Germany","Brazil","Mexico","Italy","United States","France","South Korea","Germany","South Africa","Brazil","Spain","Italy","United States","France","South Korea","South Africa","Brazil","France","South Korea","Germany","South Africa","Brazil","United States","France","South Korea","South Africa","Brazil","Spain","Mexico","South Africa","Brazil","United States","France","South Korea","Germany",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],["https://en.wikipedia.org/wiki/1982_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1982_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1982_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1982_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1982_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1982_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/1982_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/1982_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1982_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1982_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1982_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1982_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1982_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],["Semi Finals","Semi Finals","Win","Quarter Finals","Quarter Finals","Semi Finals","Semi Finals","Semi Finals","Win","Win","Round of 16","Semi Finals","Semi Finals","Quarter Finals","Round of 16","Win","Group Stage","Group Stage","Round of 16","Quarter Finals","Round of 16","Quarter Finals","Group Stage","Quarter Finals","Round of 16","Win","Group Stage","Quarter Finals","Quarter Finals","Semi Finals","Round of 16","Quarter Finals","Quarter Finals","Round of 16","Group Stage","Semi Finals","Semi Finals","Win","Group Stage","Semi Finals","Group Stage","Quarter Finals","Round of 16","Semi Finals","Round of 16","Round of 16","Group Stage","Round of 16","Quarter Finals","Round of 16","Quarter Finals","Semi Finals","Round of 16","Semi Finals","Semi Finals","Group Stage","Group Stage","Semi Finals","Round of 16","Group Stage","Semi Finals","Group Stage","Group Stage","Group Stage","Round of 16","Quarter Finals","Round of 16","Group Stage","Semi Finals","Round of 16","Group Stage","Group Stage","Round of 16","Group Stage","Group Stage","Group Stage","Group Stage","Semi Finals","Round of 16","Round of 16","Round of 16","Round of 16","Group Stage","Round of 16","Round of 16","Win","Semi Finals","Round of 16","Quarter Finals","Group Stage","Quarter Finals","Quarter Finals","Semi Finals","Quarter Finals","Quarter Finals","Round of 16","Win","Semi Finals","Win","Quarter Finals","Quarter Finals","Quarter Finals","Round of 16","Round of 16","Round of 16","Round of 16","Round of 16","Round of 16","Group Stage","Round of 16","Group Stage","Quarter Finals","Group Stage","Round of 16","Round of 16","Round of 16","Round of 16","Round of 16","Group Stage","Quarter Finals","Round of 16","Round of 16","Group Stage","Semi Finals","Round of 16","Group Stage","Round of 16","Round of 16","Round of 16","Round of 16","Group Stage","Group Stage","Quarter Finals","Round of 16","Group Stage","Group Stage","Quarter Finals","Group Stage","Group Stage","Group Stage","Group Stage","Semi Finals","Group Stage","Round of 16","Group Stage","Group Stage","Quarter Finals","Group Stage","Group Stage","Group Stage","Group Stage","Group Stage","Group Stage","Round of 16","Group Stage","Round of 16","Group Stage","Round of 16","Round of 16","Group Stage","Group Stage","Round of 16","Round of 16","Group Stage","Group Stage","Round of 16","Round of 16","Group Stage","Group Stage","Group Stage","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present"],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>year<\/th>\n      <th>Team<\/th>\n      <th>Pos<\/th>\n      <th>L<\/th>\n      <th>W<\/th>\n      <th>wc<\/th>\n      <th>geo<\/th>\n      <th>index<\/th>\n      <th>host<\/th>\n      <th>link<\/th>\n      <th>counter<\/th>\n      <th>group<\/th>\n      <th>win<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,3,6,8,11,13]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"year","targets":1},{"name":"Team","targets":2},{"name":"Pos","targets":3},{"name":"L","targets":4},{"name":"W","targets":5},{"name":"wc","targets":6},{"name":"geo","targets":7},{"name":"index","targets":8},{"name":"host","targets":9},{"name":"link","targets":10},{"name":"counter","targets":11},{"name":"group","targets":12},{"name":"win","targets":13}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<section id="detailed-explanation-of-the-above-code-snippet-for-df_plot" class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="detailed-explanation-of-the-above-code-snippet-for-df_plot"><span class="header-section-number">4.1.1</span> Detailed explanation of the above code snippet for df_plot</h3>
<section id="filter-relevant-data" class="level4" data-number="4.1.1.1">
<h4 data-number="4.1.1.1" class="anchored" data-anchor-id="filter-relevant-data"><span class="header-section-number">4.1.1.1</span> Filter Relevant Data</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filter(!grepl("Eliminated", Pos) &amp; Team %in% teams$Team)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Purpose</strong>: Exclude irrelevant rows from the data.</p>
<ul>
<li><p><code>!grepl("Eliminated", Pos)</code>: Removes rows where the position (<code>Pos</code>) contains the word “Eliminated”.</p></li>
<li><p><code>Team %in% teams$Team</code>: Keeps only teams that participated in more than 3 tournaments (filtered earlier in <code>teams</code>).</p></li>
</ul>
</section>
<section id="join-additional-data" class="level4" data-number="4.1.1.2">
<h4 data-number="4.1.1.2" class="anchored" data-anchor-id="join-additional-data"><span class="header-section-number">4.1.1.2</span> Join Additional Data</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># left_join(teams, by = "Team") %&gt;%</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co"># left_join(geo_group, by = c("Team" = "country")) %&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co"># left_join(ref, by = "year")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Purpose</strong>: Merge additional information into the main dataframe.</p>
<ul>
<li><p><code>teams</code>: Adds the number of World Cups each team participated in (<code>wc</code>).</p></li>
<li><p><code>geo_group</code>: Adds geographic groupings (e.g., Europe, Americas).</p></li>
<li><p><code>ref</code>: Adds metadata like the tournament’s host country and year.</p></li>
</ul>
</section>
<section id="group-and-ensure-all-teams-appear-each-year" class="level4" data-number="4.1.1.3">
<h4 data-number="4.1.1.3" class="anchored" data-anchor-id="group-and-ensure-all-teams-appear-each-year"><span class="header-section-number">4.1.1.3</span> Group and Ensure All Teams Appear Each Year</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># group_by(year) %&gt;% complete(Team = teams$Team)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Purpose</strong>: Ensure every team that meets the criteria (<code>teams$Team</code>) is listed for every tournament year, even if they didn’t participate.</p>
<ul>
<li><code>complete(Team = teams$Team)</code>: Adds missing rows for teams not present in certain years, filling them with <code>NA</code>.</li>
</ul>
</section>
<section id="filter-out-invalid-teams" class="level4" data-number="4.1.1.4">
<h4 data-number="4.1.1.4" class="anchored" data-anchor-id="filter-out-invalid-teams"><span class="header-section-number">4.1.1.4</span> Filter Out Invalid Teams</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filter(!grepl("Eliminated", Team))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Purpose</strong>: Removes any false rows where <code>Team</code> is incorrectly filled with “Eliminated” or similar.</p>
</section>
<section id="add-new-columns" class="level4" data-number="4.1.1.5">
<h4 data-number="4.1.1.5" class="anchored" data-anchor-id="add-new-columns"><span class="header-section-number">4.1.1.5</span> Add New Columns</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mutate(counter = 1,</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>       <span class="co">#Pos = as.integer(Pos),</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>       <span class="co">#group = case_when(</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>         <span class="co">#is.na(Pos) ~ "Not Present",</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>         <span class="co">#Pos == 1 ~ "Win",</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>         <span class="co">#Pos &lt;= 4 ~ "Semi Finals",</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>         <span class="co">#Pos &lt;= 8 ~ "Quarter Finals",</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>         <span class="co">#Pos &lt;= 16 ~ "Round of 16",</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>         <span class="co">#Pos &lt;= 32 ~ "Group Stage"</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>       <span class="co">#))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Purpose</strong>: Create additional columns for further analysis and visualization.</p>
<ul>
<li><p><code>counter = 1</code>: Adds a simple counter for each row, used to calculate summaries later.</p></li>
<li><p><code>Pos = as.integer(Pos)</code>: Converts <code>Pos</code> to an integer for easier comparisons.</p></li>
<li><p><code>group</code>: Categorizes teams into performance groups:</p>
<ul>
<li><p><code>is.na(Pos)</code>: If <code>Pos</code> is <code>NA</code>, the team did not participate (<code>"Not Present"</code>).</p></li>
<li><p><code>Pos == 1</code>: Winner (<code>"Win"</code>).</p></li>
<li><p><code>Pos &lt;= 4</code>: Reached the semifinals (<code>"Semi Finals"</code>).</p></li>
<li><p><code>Pos &lt;= 8</code>: Reached the quarterfinals (<code>"Quarter Finals"</code>).</p></li>
<li><p><code>Pos &lt;= 16</code>: Reached the round of 16 (<code>"Round of 16"</code>).</p></li>
<li><p><code>Pos &lt;= 32</code>: Played in the group stage (<code>"Group Stage"</code>).</p></li>
</ul></li>
</ul>
</section>
<section id="summarize-performance-by-team" class="level4" data-number="4.1.1.6">
<h4 data-number="4.1.1.6" class="anchored" data-anchor-id="summarize-performance-by-team"><span class="header-section-number">4.1.1.6</span> Summarize Performance by Team</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># group_by(Team) %&gt;%</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co"># arrange(Team, year) %&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co"># mutate(wc = sum(counter[group != "Not Present"]),</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>       <span class="co"># win = sum(counter[group == "Win"]))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Purpose</strong>: Calculate aggregate statistics for each team.</p>
<ul>
<li><p><code>wc</code>: Total number of tournaments the team participated in (excludes <code>"Not Present"</code> years).</p></li>
<li><p><code>win</code>: Total number of tournaments won by the team.</p></li>
</ul>
</section>
<section id="sort-data" class="level4" data-number="4.1.1.7">
<h4 data-number="4.1.1.7" class="anchored" data-anchor-id="sort-data"><span class="header-section-number">4.1.1.7</span> Sort Data</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># arrange(geo, -wc, -win, Team)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Purpose</strong>: Organize the dataset for visualization.</p>
<ul>
<li><p><code>geo</code>: Groups teams by geographic region (Europe, Americas, Other).</p></li>
<li><p><code>-wc</code>: Within each group, sort teams by the number of tournaments participated in, in descending order.</p></li>
<li><p><code>-win</code>: Further sort teams by the number of wins, in descending order.</p></li>
<li><p><code>Team</code>: Finally, sort alphabetically by team name.</p></li>
</ul>
</section>
<section id="ungroup" class="level4" data-number="4.1.1.8">
<h4 data-number="4.1.1.8" class="anchored" data-anchor-id="ungroup"><span class="header-section-number">4.1.1.8</span> Ungroup</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ungroup()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Purpose</strong>: Remove grouping structure so that subsequent operations can work on the entire dataframe</p>
</section>
</section>
</section>
<section id="pre-visualization-positioning-of-teams-on-y-axis-and-assigning-accessible-color-palettes-plus-other-adjustments" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="pre-visualization-positioning-of-teams-on-y-axis-and-assigning-accessible-color-palettes-plus-other-adjustments"><span class="header-section-number">4.2</span> Pre-visualization positioning of teams on y-axis and assigning accessible color palettes, plus other adjustments</h2>
<section id="create-unique-y-positions" class="level3" data-number="4.2.1">
<h3 data-number="4.2.1" class="anchored" data-anchor-id="create-unique-y-positions"><span class="header-section-number">4.2.1</span> Create Unique Y Positions</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>df_pos <span class="ot">&lt;-</span> df_plot <span class="sc">|&gt;</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Team) <span class="sc">|&gt;</span> </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">y_pos =</span> <span class="fu">row_number</span>())</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(df_pos, <span class="at">filter =</span> <span class="st">"top"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-51fdcba74d23afbb988c" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-51fdcba74d23afbb988c">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td><\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1\" data-max=\"29\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29"],["Germany","Italy","Spain","England","France","Belgium","Netherlands","Portugal","Croatia","Denmark","Poland","Scotland","Sweden","Switzerland","Argentina","Brazil","Mexico","United States","Paraguay","Uruguay","Chile","Colombia","Costa Rica","South Korea","Cameroon","Japan","Nigeria","Algeria","Saudi Arabia"],[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Team<\/th>\n      <th>y_pos<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":2},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Team","targets":1},{"name":"y_pos","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<section id="what-this-does" class="level4" data-number="4.2.1.1">
<h4 data-number="4.2.1.1" class="anchored" data-anchor-id="what-this-does"><span class="header-section-number">4.2.1.1</span> What This Does:</h4>
<ul>
<li><p><strong><code>distinct(Team)</code></strong>:</p>
<ul>
<li><p>Extracts a unique list of all teams from the <code>df_plot</code> dataframe.</p></li>
<li><p>This ensures that each team appears only once in the resulting <code>df_pos</code> dataframe.</p></li>
</ul></li>
<li><p><strong><code>mutate(y_pos = row_number())</code></strong>:</p>
<ul>
<li>Assigns a unique numeric value (<code>row_number()</code>) to each team. This value will determine the team’s vertical position (<code>y_pos</code>) on the heatmap.</li>
</ul></li>
</ul>
</section>
</section>
<section id="merge-the-y-positions-back-to-the-main-dataset" class="level3" data-number="4.2.2">
<h3 data-number="4.2.2" class="anchored" data-anchor-id="merge-the-y-positions-back-to-the-main-dataset"><span class="header-section-number">4.2.2</span> Merge the Y Positions Back to the Main Dataset</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>df_plot <span class="ot">&lt;-</span> df_plot <span class="sc">|&gt;</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(df_pos, <span class="at">by =</span> <span class="st">"Team"</span>)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(df_plot, <span class="at">filter =</span> <span class="st">"top"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-6f1f88460135fc99c51c" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-6f1f88460135fc99c51c">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td><\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1982\" data-max=\"2014\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1\" data-max=\"32\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"4\" data-max=\"9\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Europe&quot;,&quot;Americas&quot;,&quot;Other&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"13\" data-max=\"25\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"1\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"2\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1\" data-max=\"29\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261"],[1982,1986,1990,1994,1998,2002,2006,2010,2014,1982,1986,1990,1994,1998,2002,2006,2010,2014,1982,1986,1990,1994,1998,2002,2006,2010,2014,1982,1986,1990,1998,2002,2006,2010,2014,1982,1986,1998,2002,2006,2010,2014,1982,1986,1990,1994,1998,2002,2014,1990,1994,1998,2006,2010,2014,1986,2002,2006,2010,2014,1998,2002,2006,2014,1986,1998,2002,2010,1982,1986,2002,2006,1982,1986,1990,1998,1990,1994,2002,2006,1994,2006,2010,2014,1982,1986,1990,1994,1998,2002,2006,2010,2014,1982,1986,1990,1994,1998,2002,2006,2010,1986,1994,1998,2002,2006,2010,2014,1990,1994,1998,2002,2006,2010,2014,1986,1998,2002,2006,2010,1986,1990,2002,2010,2014,1982,1998,2010,2014,1990,1994,1998,2014,1990,2002,2006,2014,1986,1990,1994,1998,2002,2006,2010,2014,1982,1990,1994,1998,2002,2010,2014,1998,2002,2006,2010,2014,1994,1998,2002,2010,2014,1982,1986,2010,2014,1994,1998,2002,2006,2014,1994,1982,1990,1994,2006,2010,1986,2006,1982,1990,1982,1986,1982,1986,2002,1982,1986,1990,1994,1982,1986,1990,2006,1982,1990,1994,2014,1982,1990,1994,1998,1982,1994,1998,2006,1990,1994,1998,2002,2006,1986,1990,1994,2002,2006,1982,1986,2002,2006,2010,1982,1986,1994,1998,2010,1982,1986,1990,1994,2010,1982,1990,1994,2006,2014,1990,1994,1998,2010,2014,1982,1986,1990,2010,2014,1994,2002,2006,2010,2014,1982,1986,1998,2010,2014,1982,1986,1990,1998,2002],["Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","England","England","England","England","England","England","England","England","France","France","France","France","France","France","France","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Portugal","Portugal","Portugal","Portugal","Portugal","Croatia","Croatia","Croatia","Croatia","Denmark","Denmark","Denmark","Denmark","Poland","Poland","Poland","Poland","Scotland","Scotland","Scotland","Scotland","Sweden","Sweden","Sweden","Sweden","Switzerland","Switzerland","Switzerland","Switzerland","Argentina","Argentina","Argentina","Argentina","Argentina","Argentina","Argentina","Argentina","Argentina","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Mexico","Mexico","Mexico","Mexico","Mexico","Mexico","Mexico","United States","United States","United States","United States","United States","United States","United States","Paraguay","Paraguay","Paraguay","Paraguay","Paraguay","Uruguay","Uruguay","Uruguay","Uruguay","Uruguay","Chile","Chile","Chile","Chile","Colombia","Colombia","Colombia","Colombia","Costa Rica","Costa Rica","Costa Rica","Costa Rica","South Korea","South Korea","South Korea","South Korea","South Korea","South Korea","South Korea","South Korea","Cameroon","Cameroon","Cameroon","Cameroon","Cameroon","Cameroon","Cameroon","Japan","Japan","Japan","Japan","Japan","Nigeria","Nigeria","Nigeria","Nigeria","Nigeria","Algeria","Algeria","Algeria","Algeria","Saudi Arabia","Saudi Arabia","Saudi Arabia","Saudi Arabia","Brazil","England","South Korea","France","France","Belgium","Belgium","Cameroon","Cameroon","Mexico","Mexico","United States","United States","Netherlands","Netherlands","Netherlands","Japan","Japan","Japan","Japan","Nigeria","Nigeria","Nigeria","Nigeria","Paraguay","Paraguay","Paraguay","Paraguay","Portugal","Portugal","Portugal","Portugal","Uruguay","Uruguay","Uruguay","Uruguay","Algeria","Algeria","Algeria","Algeria","Algeria","Chile","Chile","Chile","Chile","Chile","Colombia","Colombia","Colombia","Colombia","Colombia","Costa Rica","Costa Rica","Costa Rica","Costa Rica","Costa Rica","Croatia","Croatia","Croatia","Croatia","Croatia","Denmark","Denmark","Denmark","Denmark","Denmark","Poland","Poland","Poland","Poland","Poland","Saudi Arabia","Saudi Arabia","Saudi Arabia","Saudi Arabia","Saudi Arabia","Scotland","Scotland","Scotland","Scotland","Scotland","Sweden","Sweden","Sweden","Sweden","Sweden","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland"],[2,2,1,5,7,2,3,3,1,1,12,3,2,5,15,1,26,22,12,7,10,8,17,5,9,1,23,6,8,4,9,6,7,13,26,4,3,1,28,2,29,7,10,4,11,11,19,14,6,15,7,4,11,2,3,17,21,4,11,18,3,23,22,19,9,8,10,24,3,14,25,21,15,19,19,27,21,3,13,14,15,10,19,11,11,1,2,10,6,18,6,5,2,5,5,9,1,2,1,5,6,6,13,13,11,15,14,10,23,14,32,8,25,12,15,13,14,16,18,8,16,16,26,4,12,22,16,10,9,14,19,21,5,13,19,31,8,20,22,20,30,4,17,15,27,17,7,22,25,20,31,32,31,9,28,9,29,9,12,27,27,16,13,22,28,14,12,28,32,28,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],["2","2","0","1","1","1","1","2","0","0","1","0","1","0","2","0","1","2","2","1","1","1","1","0","1","1","2","0","2","1","1","1","0","1","2","2","1","0","2","0","2","1","2","3","2","2","0","1","1","1","2","1","1","1","0","2","2","2","1","1","2","2","1","2","1","2","1","2","1","2","2","2","1","2","2","2","3","1","1","1","2","0","1","2","3","0","2","2","1","1","0","1","1","1","0","1","0","2","0","1","1","0","1","1","1","2","2","1","3","2","3","2","2","1","2","1","1","2","2","1","2","2","1","2","2","3","1","2","1","2","2","2","1","2","1","3","0","2","3","1","2","2","1","2","2","0","2","2","1","1","3","3","3","1","2","1","2","2","2","2","2","2","1","2","2","2","2","2","3","2",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],["3","3","5","3","3","5","5","5","6","4","1","6","4","3","1","5","0","1","1","3","2","2","1","3","3","6","1","3","2","3","2","2","3","1","0","3","4","6","0","4","0","3","2","2","2","2","0","1","4","0","3","3","2","6","5","1","1","4","1","1","5","1","0","1","3","2","2","1","3","1","1","1","1","0","1","0","0","3","1","1","1","2","1","2","2","6","2","2","3","1","3","4","5","4","4","3","5","4","7","4","3","3","1","1","2","1","1","2","0","1","0","2","0","1","1","1","1","1","1","1","0","1","0","3","2","0","0","2","2","1","1","1","4","2","1","0","2","0","0","0","0","3","1","1","0","0","3","0","0","1","0","0","0","2","0","2","0","2","2","0","0","1","2","0","0","1","2","0","0","0",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,8,8,8,8,8,8,8,8,7,7,7,7,7,7,7,7,7,7,7,7,7,7,6,6,6,6,6,6,5,5,5,5,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,9,9,9,9,9,9,9,9,8,8,8,8,8,8,8,8,7,7,7,7,7,7,7,7,7,7,7,7,7,7,5,5,5,5,5,5,5,5,5,5,4,4,4,4,4,4,4,4,4,4,4,4,8,8,8,8,8,8,8,8,7,7,7,7,7,7,7,5,5,5,5,5,5,5,5,5,5,4,4,4,4,4,4,4,4,8,8,8,7,7,7,7,7,7,7,7,7,7,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],["Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[16,14,15,13,25,24,23,14,20,16,14,15,13,25,24,23,14,20,16,14,15,13,25,24,23,14,20,16,14,15,25,24,23,14,20,16,14,25,24,23,14,20,16,14,15,13,25,24,20,15,13,25,23,14,20,14,24,23,14,20,25,24,23,20,14,25,24,14,16,14,24,23,16,14,15,25,15,13,24,23,13,23,14,20,16,14,15,13,25,24,23,14,20,16,14,15,13,25,24,23,14,14,13,25,24,23,14,20,15,13,25,24,23,14,20,14,25,24,23,14,14,15,24,14,20,16,25,14,20,15,13,25,20,15,24,23,20,14,15,13,25,24,23,14,20,16,15,13,25,24,14,20,25,24,23,14,20,13,25,24,14,20,16,14,14,20,13,25,24,23,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],["Spain","Mexico","Italy","United States","France","South Korea","Germany","South Africa","Brazil","Spain","Mexico","Italy","United States","France","South Korea","Germany","South Africa","Brazil","Spain","Mexico","Italy","United States","France","South Korea","Germany","South Africa","Brazil","Spain","Mexico","Italy","France","South Korea","Germany","South Africa","Brazil","Spain","Mexico","France","South Korea","Germany","South Africa","Brazil","Spain","Mexico","Italy","United States","France","South Korea","Brazil","Italy","United States","France","Germany","South Africa","Brazil","Mexico","South Korea","Germany","South Africa","Brazil","France","South Korea","Germany","Brazil","Mexico","France","South Korea","South Africa","Spain","Mexico","South Korea","Germany","Spain","Mexico","Italy","France","Italy","United States","South Korea","Germany","United States","Germany","South Africa","Brazil","Spain","Mexico","Italy","United States","France","South Korea","Germany","South Africa","Brazil","Spain","Mexico","Italy","United States","France","South Korea","Germany","South Africa","Mexico","United States","France","South Korea","Germany","South Africa","Brazil","Italy","United States","France","South Korea","Germany","South Africa","Brazil","Mexico","France","South Korea","Germany","South Africa","Mexico","Italy","South Korea","South Africa","Brazil","Spain","France","South Africa","Brazil","Italy","United States","France","Brazil","Italy","South Korea","Germany","Brazil","Mexico","Italy","United States","France","South Korea","Germany","South Africa","Brazil","Spain","Italy","United States","France","South Korea","South Africa","Brazil","France","South Korea","Germany","South Africa","Brazil","United States","France","South Korea","South Africa","Brazil","Spain","Mexico","South Africa","Brazil","United States","France","South Korea","Germany",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],["https://en.wikipedia.org/wiki/1982_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1982_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1982_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1982_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1982_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1982_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/1982_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/1982_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1982_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1982_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1982_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1982_FIFA_World_Cup","https://en.wikipedia.org/wiki/1990_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1982_FIFA_World_Cup","https://en.wikipedia.org/wiki/1986_FIFA_World_Cup","https://en.wikipedia.org/wiki/2010_FIFA_World_Cup","https://en.wikipedia.org/wiki/2014_FIFA_World_Cup","https://en.wikipedia.org/wiki/1994_FIFA_World_Cup","https://en.wikipedia.org/wiki/1998_FIFA_World_Cup","https://en.wikipedia.org/wiki/2002_FIFA_World_Cup","https://en.wikipedia.org/wiki/2006_FIFA_World_Cup",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],["Semi Finals","Semi Finals","Win","Quarter Finals","Quarter Finals","Semi Finals","Semi Finals","Semi Finals","Win","Win","Round of 16","Semi Finals","Semi Finals","Quarter Finals","Round of 16","Win","Group Stage","Group Stage","Round of 16","Quarter Finals","Round of 16","Quarter Finals","Group Stage","Quarter Finals","Round of 16","Win","Group Stage","Quarter Finals","Quarter Finals","Semi Finals","Round of 16","Quarter Finals","Quarter Finals","Round of 16","Group Stage","Semi Finals","Semi Finals","Win","Group Stage","Semi Finals","Group Stage","Quarter Finals","Round of 16","Semi Finals","Round of 16","Round of 16","Group Stage","Round of 16","Quarter Finals","Round of 16","Quarter Finals","Semi Finals","Round of 16","Semi Finals","Semi Finals","Group Stage","Group Stage","Semi Finals","Round of 16","Group Stage","Semi Finals","Group Stage","Group Stage","Group Stage","Round of 16","Quarter Finals","Round of 16","Group Stage","Semi Finals","Round of 16","Group Stage","Group Stage","Round of 16","Group Stage","Group Stage","Group Stage","Group Stage","Semi Finals","Round of 16","Round of 16","Round of 16","Round of 16","Group Stage","Round of 16","Round of 16","Win","Semi Finals","Round of 16","Quarter Finals","Group Stage","Quarter Finals","Quarter Finals","Semi Finals","Quarter Finals","Quarter Finals","Round of 16","Win","Semi Finals","Win","Quarter Finals","Quarter Finals","Quarter Finals","Round of 16","Round of 16","Round of 16","Round of 16","Round of 16","Round of 16","Group Stage","Round of 16","Group Stage","Quarter Finals","Group Stage","Round of 16","Round of 16","Round of 16","Round of 16","Round of 16","Group Stage","Quarter Finals","Round of 16","Round of 16","Group Stage","Semi Finals","Round of 16","Group Stage","Round of 16","Round of 16","Round of 16","Round of 16","Group Stage","Group Stage","Quarter Finals","Round of 16","Group Stage","Group Stage","Quarter Finals","Group Stage","Group Stage","Group Stage","Group Stage","Semi Finals","Group Stage","Round of 16","Group Stage","Group Stage","Quarter Finals","Group Stage","Group Stage","Group Stage","Group Stage","Group Stage","Group Stage","Round of 16","Group Stage","Round of 16","Group Stage","Round of 16","Round of 16","Group Stage","Group Stage","Round of 16","Round of 16","Group Stage","Group Stage","Round of 16","Round of 16","Group Stage","Group Stage","Group Stage","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present","Not Present"],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,6,6,6,6,6,6,6,7,7,7,7,7,7,8,8,8,8,8,9,9,9,9,10,10,10,10,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,15,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,19,19,19,19,19,20,20,20,20,20,21,21,21,21,22,22,22,22,23,23,23,23,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,26,26,26,26,26,27,27,27,27,27,28,28,28,28,29,29,29,29,16,4,24,5,5,6,6,25,25,17,17,18,18,7,7,7,26,26,26,26,27,27,27,27,19,19,19,19,8,8,8,8,20,20,20,20,28,28,28,28,28,21,21,21,21,21,22,22,22,22,22,23,23,23,23,23,9,9,9,9,9,10,10,10,10,10,11,11,11,11,11,29,29,29,29,29,12,12,12,12,12,13,13,13,13,13,14,14,14,14,14]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>year<\/th>\n      <th>Team<\/th>\n      <th>Pos<\/th>\n      <th>L<\/th>\n      <th>W<\/th>\n      <th>wc<\/th>\n      <th>geo<\/th>\n      <th>index<\/th>\n      <th>host<\/th>\n      <th>link<\/th>\n      <th>counter<\/th>\n      <th>group<\/th>\n      <th>win<\/th>\n      <th>y_pos<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,3,6,8,11,13,14]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"year","targets":1},{"name":"Team","targets":2},{"name":"Pos","targets":3},{"name":"L","targets":4},{"name":"W","targets":5},{"name":"wc","targets":6},{"name":"geo","targets":7},{"name":"index","targets":8},{"name":"host","targets":9},{"name":"link","targets":10},{"name":"counter","targets":11},{"name":"group","targets":12},{"name":"win","targets":13},{"name":"y_pos","targets":14}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<section id="what-this-does-1" class="level4" data-number="4.2.2.1">
<h4 data-number="4.2.2.1" class="anchored" data-anchor-id="what-this-does-1"><span class="header-section-number">4.2.2.1</span> What This Does:</h4>
<ul>
<li><p><strong><code>left_join(df_pos, by = "Team")</code></strong>:</p>
<ul>
<li><p>Combines the <code>df_pos</code> dataframe (which contains the unique <code>y_pos</code> values) back into the original <code>df_plot</code> dataframe.</p></li>
<li><p>For each row in <code>df_plot</code>, it looks up the corresponding <code>y_pos</code> based on the <code>Team</code> column and adds it.</p></li>
</ul></li>
</ul>
</section>
<section id="why-this-is-needed" class="level4" data-number="4.2.2.2">
<h4 data-number="4.2.2.2" class="anchored" data-anchor-id="why-this-is-needed"><span class="header-section-number">4.2.2.2</span> Why This Is Needed:</h4>
<ul>
<li>This step ensures that every row in <code>df_plot</code> (which contains multiple entries per team for each World Cup year) now includes the <code>y_pos</code> value to determine its vertical position in the heatmap.</li>
</ul>
</section>
</section>
<section id="adjust-y-positions-for-spacing-between-geographic-groups" class="level3" data-number="4.2.3">
<h3 data-number="4.2.3" class="anchored" data-anchor-id="adjust-y-positions-for-spacing-between-geographic-groups"><span class="header-section-number">4.2.3</span> Adjust Y Positions for Spacing Between Geographic Groups</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>df_plot<span class="sc">$</span>y_pos <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(df_plot<span class="sc">$</span>y_pos <span class="sc">&lt;</span> <span class="dv">16</span>, df_plot<span class="sc">$</span>y_pos, df_plot<span class="sc">$</span>y_pos <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>df_plot<span class="sc">$</span>y_pos <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(df_plot<span class="sc">$</span>y_pos <span class="sc">&lt;</span> <span class="dv">26</span>, df_plot<span class="sc">$</span>y_pos, df_plot<span class="sc">$</span>y_pos <span class="sc">+</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="what-this-does-2" class="level4" data-number="4.2.3.1">
<h4 data-number="4.2.3.1" class="anchored" data-anchor-id="what-this-does-2"><span class="header-section-number">4.2.3.1</span> What This Does:</h4>
<ul>
<li><p>Adds blank space between different geographic regions (e.g., Europe, Americas, Other) in the heatmap.</p></li>
<li><p><strong>How It Works</strong>:</p>
<ul>
<li><p><code>ifelse(condition, value_if_true, value_if_false)</code> checks a condition and applies the appropriate value for each row.</p></li>
<li><p>The logic:</p>
<ul>
<li><p>If <code>y_pos &lt; 16</code>, leave it unchanged (<code>df_plot$y_pos</code> remains the same).</p></li>
<li><p>Otherwise, increase the <code>y_pos</code> value by 1.</p></li>
<li><p>Repeat the process for <code>y_pos &lt; 26</code> to introduce additional spacing.</p></li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="why-this-is-needed-1" class="level4" data-number="4.2.3.2">
<h4 data-number="4.2.3.2" class="anchored" data-anchor-id="why-this-is-needed-1"><span class="header-section-number">4.2.3.2</span> Why This Is Needed:</h4>
<ul>
<li>Creates visual separation between teams from different geographic groups in the heatmap.</li>
</ul>
</section>
</section>
<section id="create-a-factor-for-achievement-groups" class="level3" data-number="4.2.4">
<h3 data-number="4.2.4" class="anchored" data-anchor-id="create-a-factor-for-achievement-groups"><span class="header-section-number">4.2.4</span> Create a Factor for Achievement Groups</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>df_plot<span class="sc">$</span>group <span class="ot">&lt;-</span> <span class="fu">factor</span>(df_plot<span class="sc">$</span>group, </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Not Present"</span>, <span class="st">"Group Stage"</span>, <span class="st">"Round of 16"</span>, <span class="st">"Quarter Finals"</span>, <span class="st">"Semi Finals"</span>, <span class="st">"Win"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="what-this-does-3" class="level4" data-number="4.2.4.1">
<h4 data-number="4.2.4.1" class="anchored" data-anchor-id="what-this-does-3"><span class="header-section-number">4.2.4.1</span> What This Does:</h4>
<ul>
<li>Converts the <code>group</code> column (team performance categories) into an <strong>ordered factor</strong> with the specified levels.</li>
</ul>
</section>
<section id="why-this-is-needed-2" class="level4" data-number="4.2.4.2">
<h4 data-number="4.2.4.2" class="anchored" data-anchor-id="why-this-is-needed-2"><span class="header-section-number">4.2.4.2</span> Why This Is Needed:</h4>
<ul>
<li><p>Factors in R allow you to define the order of categories explicitly.</p></li>
<li><p>By ordering the levels, the heatmap will display the groups (e.g., “Not Present”, “Group Stage”) in a consistent order, instead of defaulting to alphabetical order.</p></li>
</ul>
</section>
<section id="levels-explanation" class="level4" data-number="4.2.4.3">
<h4 data-number="4.2.4.3" class="anchored" data-anchor-id="levels-explanation"><span class="header-section-number">4.2.4.3</span> Levels Explanation:</h4>
<p>The performance levels are arranged from lowest to highest:</p>
<ol type="1">
<li><p><code>"Not Present"</code>: Team did not participate.</p></li>
<li><p><code>"Group Stage"</code>: Team was eliminated in the group stage.</p></li>
<li><p><code>"Round of 16"</code>: Team reached the round of 16.</p></li>
<li><p><code>"Quarter Finals"</code>: Team reached the quarterfinals.</p></li>
<li><p><code>"Semi Finals"</code>: Team reached the semifinals.</p></li>
<li><p><code>"Win"</code>: Team won the tournament.</p></li>
</ol>
</section>
</section>
<section id="define-a-color-palette" class="level3" data-number="4.2.5">
<h3 data-number="4.2.5" class="anchored" data-anchor-id="define-a-color-palette"><span class="header-section-number">4.2.5</span> Define a Color Palette</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>pal <span class="ot">&lt;-</span> <span class="fu">viridis</span>(<span class="at">n =</span> <span class="dv">5</span>, <span class="at">option =</span> <span class="st">"viridis"</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="what-this-does-4" class="level4" data-number="4.2.5.1">
<h4 data-number="4.2.5.1" class="anchored" data-anchor-id="what-this-does-4"><span class="header-section-number">4.2.5.1</span> What This Does:</h4>
<ul>
<li><p><strong><code>viridis(n = 5, option = "viridis")</code></strong>:</p>
<ul>
<li><p>Generates a set of 5 colors using the <code>viridis</code> color palette, which is known for being visually appealing and colorblind-friendly.</p></li>
<li><p>The colors are used to represent different achievement levels in the heatmap.</p></li>
</ul></li>
<li><p><strong><code>[1:5]</code></strong>:</p>
<ul>
<li>Selects the first 5 colors from the palette.</li>
</ul></li>
</ul>
</section>
<section id="why-this-is-needed-3" class="level4" data-number="4.2.5.2">
<h4 data-number="4.2.5.2" class="anchored" data-anchor-id="why-this-is-needed-3"><span class="header-section-number">4.2.5.2</span> Why This Is Needed:</h4>
<ul>
<li>The <code>pal</code> object will be used later in the <code>scale_fill_manual()</code> function to map performance groups to specific colors.</li>
</ul>
</section>
</section>
<section id="manually-adjust-for-2002-south-korea-and-japan-hosting" class="level3" data-number="4.2.6">
<h3 data-number="4.2.6" class="anchored" data-anchor-id="manually-adjust-for-2002-south-korea-and-japan-hosting"><span class="header-section-number">4.2.6</span> Manually Adjust for 2002 (South Korea and Japan Hosting)</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>df_plot<span class="sc">$</span>host[df_plot<span class="sc">$</span>Team <span class="sc">==</span> <span class="st">"Japan"</span> <span class="sc">&amp;</span> df_plot<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">2002</span>] <span class="ot">&lt;-</span> <span class="st">"Japan"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="what-this-does-5" class="level4" data-number="4.2.6.1">
<h4 data-number="4.2.6.1" class="anchored" data-anchor-id="what-this-does-5"><span class="header-section-number">4.2.6.1</span> What This Does:</h4>
<ul>
<li><p><strong>Purpose</strong>: Corrects the <code>host</code> column for the year 2002, where both South Korea and Japan co-hosted the tournament.</p></li>
<li><p><strong>Logic</strong>:</p>
<ul>
<li><p>Filters rows where <code>Team == "Japan"</code> and <code>year == 2002</code>.</p></li>
<li><p>Sets the <code>host</code> value for those rows to <code>"Japan"</code>.</p></li>
</ul></li>
</ul>
</section>
<section id="why-this-is-needed-4" class="level4" data-number="4.2.6.2">
<h4 data-number="4.2.6.2" class="anchored" data-anchor-id="why-this-is-needed-4"><span class="header-section-number">4.2.6.2</span> Why This Is Needed:</h4>
<ul>
<li>In 2002, South Korea and Japan were co-hosts, which is unusual for the World Cup. By default, the data may have assigned hosting to South Korea only, so this step ensures that Japan is also correctly marked as a host.</li>
</ul>
</section>
</section>
</section>
</section>
<section id="create-the-heatmap-and-polish-it" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Create the heatmap and polish it</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> df_plot, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">as.character</span>(year), <span class="at">y =</span> y_pos, <span class="at">fill =</span> group)) <span class="sc">+</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">"white"</span>, <span class="at">width =</span> <span class="fl">0.9</span>, <span class="at">height =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, </span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">data =</span> df_plot <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Team <span class="sc">==</span> host), </span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">as.character</span>(year), <span class="at">y =</span> y_pos), </span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>, <span class="at">fill =</span> <span class="st">"white"</span>, <span class="at">color =</span> <span class="st">"grey20"</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">"text"</span>, <span class="at">x =</span> <span class="st">"2006"</span>, <span class="at">y =</span> <span class="sc">-</span><span class="fl">0.5</span>, <span class="at">label =</span> <span class="st">"Hosted"</span>, <span class="at">family =</span> <span class="st">"Roboto"</span>, <span class="at">size =</span> <span class="fl">2.75</span>) <span class="sc">+</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">"2006"</span>, <span class="at">xend =</span> <span class="st">"2006"</span>, <span class="at">y =</span> <span class="sc">-</span><span class="fl">0.1</span>, <span class="at">yend =</span> <span class="fl">0.85</span>), </span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">linewidth =</span> <span class="fl">0.1</span>, <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">length =</span> <span class="fu">unit</span>(<span class="fl">0.05</span>, <span class="st">"in"</span>))) <span class="sc">+</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">label =</span> Team, <span class="at">y =</span> y_pos, <span class="at">x =</span> <span class="sc">-</span><span class="dv">5</span>), <span class="at">size =</span> <span class="dv">3</span>, <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">"#909090"</span>, <span class="at">family =</span> <span class="st">"Roboto"</span>) <span class="sc">+</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>  geomtextpath<span class="sc">::</span><span class="fu">geom_textsegment</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">label =</span> <span class="st">"Europe"</span>, <span class="at">x =</span> <span class="sc">-</span><span class="dv">6</span>, <span class="at">xend =</span> <span class="sc">-</span><span class="dv">6</span>, <span class="at">y =</span> <span class="dv">15</span>, <span class="at">yend =</span> <span class="dv">1</span>), <span class="at">family =</span> <span class="st">"Roboto"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>  geomtextpath<span class="sc">::</span><span class="fu">geom_textsegment</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">label =</span> <span class="st">"Americas"</span>, <span class="at">x =</span> <span class="sc">-</span><span class="dv">6</span>, <span class="at">xend =</span> <span class="sc">-</span><span class="dv">6</span>, <span class="at">y =</span> <span class="dv">25</span>, <span class="at">yend =</span> <span class="dv">17</span>), <span class="at">family =</span> <span class="st">"Roboto"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>  geomtextpath<span class="sc">::</span><span class="fu">geom_textsegment</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">label =</span> <span class="st">"Other"</span>, <span class="at">x =</span> <span class="sc">-</span><span class="dv">6</span>, <span class="at">xend =</span> <span class="sc">-</span><span class="dv">6</span>, <span class="at">y =</span> <span class="dv">36</span>, <span class="at">yend =</span> <span class="dv">27</span>), <span class="at">family =</span> <span class="st">"Roboto"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">breaks =</span> <span class="fu">as.character</span>(<span class="fu">unique</span>(df_plot<span class="sc">$</span>year)), </span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>                   <span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">mult =</span> <span class="fu">c</span>(<span class="fl">1.5</span>, <span class="fl">0.1</span>), <span class="at">add =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>))) <span class="sc">+</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_reverse</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">36</span>, <span class="at">by =</span> <span class="dv">1</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="fl">37.2</span>, <span class="sc">-</span><span class="dv">2</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"grey90"</span>, pal), </span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>                    <span class="at">guide =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">override.aes =</span> <span class="fu">list</span>(<span class="at">width =</span> <span class="fl">0.6</span>, <span class="at">height =</span> <span class="fl">0.6</span>))) <span class="sc">+</span></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>() <span class="sc">+</span></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">""</span>, <span class="at">fill =</span> <span class="st">"Top Achievement"</span>) <span class="sc">+</span></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"Roboto"</span>),</span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>),</span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">6</span>),</span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>, <span class="at">angle =</span> <span class="dv">90</span>, <span class="at">family =</span> <span class="st">"Roboto"</span>),</span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.background =</span> <span class="fu">element_blank</span>())</span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a>plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="fifa_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The code above creates an initial heatmap that looks almost fully baked, but needs a few more tweaks.</p>
<section id="detailed-heatmap-plot-explanation" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="detailed-heatmap-plot-explanation"><span class="header-section-number">5.1</span> Detailed Heatmap plot explanation</h2>
<p>Before we do the additional tweaking, lets walkthrough what each chunk of code above is doing - layer by layer.</p>
<section id="initial-plot" class="level3" data-number="5.1.1">
<h3 data-number="5.1.1" class="anchored" data-anchor-id="initial-plot"><span class="header-section-number">5.1.1</span> Initial Plot</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot(data = df_plot, mapping = aes(x = as.character(year), y = y_pos, fill = group))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p><strong>Purpose</strong>: Sets up the base layer of the plot.</p>
<ul>
<li><p><strong><code>data = df_plot</code></strong>: Uses the pre-processed dataset <strong><code>df_plot</code></strong> for plotting.</p></li>
<li><p><strong><code>aes(x = as.character(year), y = y_pos, fill = group)</code></strong>: Maps the following:</p>
<ul>
<li><p><strong><code>x</code></strong>: Years of the FIFA tournaments (converted to character to ensure proper categorical spacing).</p></li>
<li><p><strong><code>y</code></strong>: Vertical position of each team (<strong><code>y_pos</code></strong>), which was calculated earlier to ensure unique spacing.</p></li>
<li><p><strong><code>fill</code></strong>: The performance group of the team (e.g., “Win”, “Quarter Finals”).</p></li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="add-heatmap-tiles" class="level3" data-number="5.1.2">
<h3 data-number="5.1.2" class="anchored" data-anchor-id="add-heatmap-tiles"><span class="header-section-number">5.1.2</span> Add Heatmap Tiles</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># geom_tile(color = "white", width = 0.9, height = 0.9)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p><strong>Purpose</strong>: Creates the heatmap by drawing tiles.</p>
<ul>
<li><p><strong><code>color = "white"</code></strong>: Sets the border color of each tile.</p></li>
<li><p><strong><code>width = 0.9, height = 0.9</code></strong>: Controls the size of each tile (slightly smaller than full size to leave spacing between tiles).</p></li>
</ul></li>
</ul>
</section>
<section id="add-points-for-host-countries" class="level3" data-number="5.1.3">
<h3 data-number="5.1.3" class="anchored" data-anchor-id="add-points-for-host-countries"><span class="header-section-number">5.1.3</span> Add Points for Host Countries</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># geom_point(inherit.aes = FALSE, </span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>           <span class="co"># data = df_plot %&gt;% filter(Team == host), </span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>           <span class="co"># mapping = aes(x = as.character(year), y = y_pos), </span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>           <span class="co"># shape = 21, fill = "white", color = "grey20", size = 3)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p><strong>Purpose</strong>: Adds circular points to indicate the host country for each year.</p>
<ul>
<li><p><strong><code>inherit.aes = FALSE</code></strong>: Prevents this layer from inheriting the default aesthetics from <strong><code>ggplot</code></strong>.</p></li>
<li><p><strong><code>data = df_plot %&gt;% filter(Team == host)</code></strong>: Filters the data to only include the host teams for each year.</p></li>
<li><p><strong><code>aes(x = as.character(year), y = y_pos)</code></strong>: Places the points in the corresponding year and <strong><code>y_pos</code></strong> of the host country.</p></li>
<li><p><strong><code>shape = 21</code></strong>: Creates a circular shape.</p></li>
<li><p><strong><code>fill = "white"</code></strong> and <strong><code>color = "grey20"</code></strong>: Makes the circle white with a dark grey outline.</p></li>
<li><p><strong><code>size = 3</code></strong>: Sets the size of the points.</p></li>
</ul></li>
</ul>
</section>
<section id="annotated-host-text" class="level3" data-number="5.1.4">
<h3 data-number="5.1.4" class="anchored" data-anchor-id="annotated-host-text"><span class="header-section-number">5.1.4</span> Annotated Host Text</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># annotate(geom = "text", x = "2006", y = -0.5, label = "Hosted", family = "Roboto", size = 2.75)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p><strong>Purpose</strong>: Adds the “Hosted” label to the plot.</p>
<ul>
<li><p><strong><code>geom = "text"</code></strong>: Specifies that the annotation is text.</p></li>
<li><p><strong><code>x = "2006", y = -0.5</code></strong>: Places the text below the 2006 column.</p></li>
<li><p><strong><code>label = "Hosted"</code></strong>: Specifies the text to display.</p></li>
<li><p><strong><code>family = "Roboto"</code></strong>: Sets the font family for the text.</p></li>
<li><p><strong><code>size = 2.75</code></strong>: Adjusts the font size.</p></li>
</ul></li>
</ul>
</section>
<section id="add-an-arrow" class="level3" data-number="5.1.5">
<h3 data-number="5.1.5" class="anchored" data-anchor-id="add-an-arrow"><span class="header-section-number">5.1.5</span> Add an arrow</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># geom_segment(mapping = aes(x = "2006", xend = "2006", y = -0.1, yend = 0.85), </span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>             <span class="co">#linewidth = 0.1, arrow = arrow(length = unit(0.05, "in")))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p><strong>Purpose</strong>: Adds a vertical arrow pointing to the “Hosted” annotation.</p>
<ul>
<li><p><strong><code>x = "2006", xend = "2006"</code></strong>: Starts and ends at the 2006 column.</p></li>
<li><p><strong><code>y = -0.1, yend = 0.85</code></strong>: Specifies the start and end positions of the arrow.</p></li>
<li><p><strong><code>size = 0.1</code></strong>: Sets the thickness of the arrow.</p></li>
<li><p><strong><code>arrow = arrow(...)</code></strong>: Draws the arrowhead.</p></li>
</ul></li>
</ul>
</section>
<section id="add-team-names" class="level3" data-number="5.1.6">
<h3 data-number="5.1.6" class="anchored" data-anchor-id="add-team-names"><span class="header-section-number">5.1.6</span> Add Team names</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># geom_text(mapping = aes(label = Team, y = y_pos, x = -5), size = 3, hjust = 0, color = "#909090", family = "Roboto")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Purpose</strong>: Displays team names on the y-axis.</p>
<ul>
<li><p><strong><code>label = Team</code></strong>: Specifies the text (team names) to display.</p></li>
<li><p><strong><code>y = y_pos, x = -5</code></strong>: Positions the text at the corresponding <strong><code>y_pos</code></strong>, with some spacing on the left.</p></li>
<li><p><strong><code>size = 3</code></strong>: Sets the font size.</p></li>
<li><p><strong><code>hjust = 0</code></strong>: Left-aligns the text.</p></li>
<li><p><strong><code>color = "#909090"</code></strong>: Sets the text color to grey.</p></li>
<li><p><strong><code>family = "Roboto"</code></strong>: Uses the Roboto font.</p></li>
</ul>
</section>
<section id="add-geographic-group-labels" class="level3" data-number="5.1.7">
<h3 data-number="5.1.7" class="anchored" data-anchor-id="add-geographic-group-labels"><span class="header-section-number">5.1.7</span> Add Geographic Group Labels</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># geomtextpath::geom_textsegment(mapping = aes(label = "Europe", x = -6, xend = -6, y = 15, yend = 1), family = "Roboto", fontface = "bold")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Purpose</strong>: Adds labels for geographic groupings (e.g., “Europe”, “Americas”).</p>
<ul>
<li><p><strong><code>geomtextpath::geom_textsegment</code></strong>: Creates a text label along a line.</p></li>
<li><p><strong><code>label = "Europe"</code></strong>: Specifies the text for the label.</p></li>
<li><p><strong><code>x = -6, xend = -6, y = 15, yend = 1</code></strong>: Positions the line vertically to cover the region.</p></li>
<li><p><strong><code>family = "Roboto"</code></strong>: Sets the font family.</p></li>
<li><p><strong><code>fontface = "bold"</code></strong>: Makes the text bold</p></li>
</ul>
</section>
<section id="customize-scales" class="level3" data-number="5.1.8">
<h3 data-number="5.1.8" class="anchored" data-anchor-id="customize-scales"><span class="header-section-number">5.1.8</span> Customize scales</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># scale_x_discrete(breaks = as.character(unique(df_plot$year)), expand = expansion(mult = c(1.5, 0.1), add = c(1, 1)))</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="co"># scale_y_reverse(breaks = seq(0, 36, by = 1), limits = c(37.2, -2), expand = c(0, 0))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p><strong>Purpose</strong>: Adjusts the x-axis and y-axis scales.</p>
<ul>
<li><p><strong><code>scale_x_discrete</code></strong>: Ensures proper spacing for the years on the x-axis.</p></li>
<li><p><strong><code>scale_y_reverse</code></strong>: Reverses the y-axis so higher numbers are at the bottom.</p></li>
<li><p><strong><code>expand</code></strong>: Adds extra space around the plot for better alignment.</p></li>
</ul></li>
</ul>
</section>
<section id="customize-fill-colors" class="level3" data-number="5.1.9">
<h3 data-number="5.1.9" class="anchored" data-anchor-id="customize-fill-colors"><span class="header-section-number">5.1.9</span> Customize fill colors</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># scale_fill_manual(values = c("grey90", pal), guide = guide_legend(ncol = 1, override.aes = list(width = 0.6, height = 0.6)))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p><strong>Purpose</strong>: Maps colors to performance groups and customizes the legend.</p>
<ul>
<li><p><strong><code>values = c("grey90", pal)</code></strong>: Specifies the color palette (<strong><code>pal</code></strong> is predefined earlier).</p></li>
<li><p><strong><code>guide</code></strong>: Adjusts the legend display (e.g., one column layout).</p></li>
</ul></li>
</ul>
</section>
<section id="apply-themes" class="level3" data-number="5.1.10">
<h3 data-number="5.1.10" class="anchored" data-anchor-id="apply-themes"><span class="header-section-number">5.1.10</span> Apply themes</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># theme_void() +</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="co"># theme(text = element_text(family = "Roboto"),</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>      <span class="co"># plot.title = element_text(face = "bold"),</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>      <span class="co"># legend.position = "none",</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>      <span class="co"># axis.text.x = element_text(size = 8, angle = 90, family = "Roboto"),</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>      <span class="co"># axis.text.y = element_blank(),</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>      <span class="co"># axis.ticks = element_blank(),</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>      <span class="co"># panel.background = element_blank())</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p><strong>Purpose</strong>: Removes unnecessary elements and applies styling.</p>
<ul>
<li><p><strong><code>theme_void()</code></strong>: Removes all default plot elements (gridlines, axes, etc.).</p></li>
<li><p><strong><code>text = element_text(family = "Roboto")</code></strong>: Sets the default font.</p></li>
<li><p><strong><code>legend.position = "none"</code></strong>: Hides the legend.</p></li>
<li><p><strong><code>axis.text.x</code></strong>: Displays x-axis labels rotated vertically.</p></li>
<li><p><strong><code>axis.text.y</code></strong>, <strong><code>axis.ticks</code></strong>: Hides the y-axis labels and ticks.</p></li>
</ul></li>
</ul>
</section>
</section>
</section>
<section id="add-text-and-annotations" class="level1 page-columns page-full" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Add text and annotations</h1>
<section id="create-text" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="create-text"><span class="header-section-number">6.1</span> Create text</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co">#create title text - used with ggtext::geom_textbox</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>fifa_text<span class="ot">&lt;-</span> <span class="st">"The FIFA World Cup, started in 1930, is an international football competition that takes place every four years. The analysis looks at the span of FIFA competitions between 1978 and 2018, tracking teams that participated in a minimum of 4 tournaments."</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>fifa_text2<span class="ot">&lt;-</span><span class="st">"It is important to note that the format of the competition and number of teams admitted has changed over time. In 1982, a total of 24 teams participated, and in subsequent tournaments, FIFA expanded the tournament to admit 32 teams. The Round of 16 was not introduced until 1986 - to standardize comparison, teams that achieved a ranking of at least 16 in competitions before 1986 were grouped as Round of 16. "</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>fifa_text3<span class="ot">&lt;-</span><span class="st">"Graphic groups teams by geographic location. The other grouping combines teams from Asia, Africa, and Australia. Between 1950 and 1990, Germany competed as two entities, West Germany and East Germany (result of the 1945 division). East Germany participated once in 1974. To standardize analysis, West Germany is relabeled as Germany for both 1982 and 1990 tournaments."</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="create-a-custom-legend" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="create-a-custom-legend"><span class="header-section-number">6.2</span> Create a custom legend</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co">#create df for custom legend (positions relative to new plot creating in next step)</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>df_legend<span class="ot">&lt;-</span><span class="fu">data.frame</span>(<span class="at">x=</span> <span class="fu">rep</span>(<span class="fu">seq</span>(<span class="fl">3.38</span>, <span class="dv">5</span>, <span class="at">by=</span>.<span class="dv">6</span>),<span class="dv">2</span>),</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">y=</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="fl">2.1</span>, <span class="dv">3</span>),<span class="fu">rep</span>(<span class="fl">1.95</span>,<span class="dv">3</span>)),</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>                      <span class="at">label=</span><span class="fu">c</span>(<span class="st">"Not Present"</span>,<span class="st">"Group Stage"</span>, <span class="st">"Round of 16"</span>,<span class="st">"Quarter Finals"</span>,<span class="st">"Semi Finals"</span>,<span class="st">"Winner"</span>),</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>                      <span class="at">color =</span> <span class="fu">c</span>(<span class="st">"grey90"</span>,pal))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>…</p>
</section>
<section id="helper-function-to-make-image-transparent" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="helper-function-to-make-image-transparent"><span class="header-section-number">6.3</span> Helper function to make image transparent</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Adding alpha function to geom_image</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="co">#solution from: https://stackoverflow.com/questions/60820565/is-there-a-way-to-add-an-alpha-value-within-geom-image-in-ggplot</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>transparent <span class="ot">&lt;-</span> <span class="cf">function</span>(img) {</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  magick<span class="sc">::</span><span class="fu">image_fx</span>(img, <span class="at">expression =</span> <span class="st">"0.1*a"</span>, <span class="at">channel =</span> <span class="st">"alpha"</span>)</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>….</p>
</section>
<section id="the-code-to-add-the-text-and-annotations" class="level2" data-number="6.4">
<h2 data-number="6.4" class="anchored" data-anchor-id="the-code-to-add-the-text-and-annotations"><span class="header-section-number">6.4</span> The code to add the text and annotations</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>title <span class="ot">&lt;-</span> <span class="fu">paste0</span>(</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"&lt;span style='font-family:Cocon;font-size:28pt;'&gt;**FIFA WORLD CUP**&lt;/span&gt;&lt;br&gt;&lt;br&gt;"</span>,</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"&lt;span style='font-face:CA;font-size:11pt;color:#545454;'&gt;"</span>, fifa_text, <span class="st">"&lt;/span&gt;&lt;br&gt;&lt;br&gt;"</span>,</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"&lt;span style='font-face:Roboto;font-size:11pt;color:#545454;'&gt;"</span>, fifa_text2, <span class="st">"&lt;/span&gt;&lt;br&gt;&lt;br&gt;"</span>,</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"&lt;span style='font-face:Roboto;font-size:11pt;color:#545454;'&gt;"</span>, fifa_text3, <span class="st">"&lt;/span&gt;"</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>caption <span class="ot">&lt;-</span> <span class="fu">paste0</span>(</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"&lt;span style='font-family:Roboto;padding-right:10px;'&gt;Source: Wikipedia&lt;/span&gt;"</span>,</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"&lt;span style='color:#ffffff;'&gt;.....&lt;/span&gt;"</span>,</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"&lt;span style='font-family:fb;'&gt;&amp;#xf099;&lt;/span&gt;"</span>,</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"&lt;span style='font-family:Roboto;'&gt;@tanya_shapiro&lt;/span&gt;"</span>,</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">"&lt;span style='color:#ffffff;'&gt;...&lt;/span&gt;"</span>,</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">"&lt;span style='font-family:fb;'&gt;&amp;#xf09b;&lt;/span&gt;"</span>,</span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">"&lt;span style='font-family:Roboto;'&gt; tashapiro &lt;/span&gt;"</span></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="final-plot" class="level2" data-number="6.5">
<h2 data-number="6.5" class="anchored" data-anchor-id="final-plot"><span class="header-section-number">6.5</span> Final plot</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Final Plot (note: positioning of layers was very experimental, hindsight would set scales from 0 to n)</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">#add in tile heatmap</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotation_custom</span>(<span class="fu">ggplotGrob</span>(plot), <span class="at">xmin=</span><span class="dv">3</span>, <span class="at">xmax=</span><span class="fl">8.5</span>, <span class="at">ymin=</span><span class="fl">1.25</span>, <span class="at">ymax=</span><span class="fl">4.75</span>)<span class="sc">+</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#add ball image </span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_image</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span><span class="fl">3.3</span>, <span class="at">y=</span><span class="fl">4.5</span>, <span class="at">image=</span><span class="st">"./assets/ball.png"</span>), <span class="at">image_fun =</span> transparent, <span class="at">size=</span>.<span class="dv">4</span>)<span class="sc">+</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>  <span class="co">#add plot title</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_textbox</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span><span class="fl">3.3</span>, <span class="at">y=</span><span class="fl">4.5</span>, <span class="at">label=</span>title), <span class="at">hjust=</span><span class="dv">0</span>, <span class="at">vjust=</span><span class="dv">1</span>, <span class="at">box.size=</span><span class="cn">NA</span>, <span class="at">fill=</span><span class="cn">NA</span>,  <span class="at">width =</span> <span class="fu">unit</span>(<span class="dv">4</span>, <span class="st">"inch"</span>))<span class="sc">+</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>  <span class="co">#add caption</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_textbox</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span><span class="fl">3.3</span>, <span class="at">y=</span><span class="fl">1.25</span>, <span class="at">label=</span>caption), <span class="at">size=</span><span class="dv">3</span>, <span class="at">color=</span><span class="st">"#6E6E6E"</span>, <span class="at">hjust=</span><span class="dv">0</span>, <span class="at">vjust=</span><span class="dv">1</span>, <span class="at">box.size=</span><span class="cn">NA</span>, <span class="at">fill=</span><span class="cn">NA</span>,  <span class="at">width =</span> <span class="fu">unit</span>(<span class="fl">3.5</span>, <span class="st">"inch"</span>))<span class="sc">+</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>  <span class="co">#add custom legend</span></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span><span class="fl">3.35</span>, <span class="at">y=</span><span class="fl">2.25</span>, <span class="at">label=</span><span class="st">"Best Achievement"</span>), <span class="at">hjust=</span><span class="dv">0</span>, <span class="at">family=</span><span class="st">"Roboto"</span>, <span class="at">fontface=</span><span class="st">"bold"</span>)<span class="sc">+</span></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>df_legend, <span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span>x<span class="fl">+.08</span>, <span class="at">y=</span>y, <span class="at">label=</span>label), <span class="at">hjust=</span><span class="dv">0</span>, <span class="at">family=</span><span class="st">"Roboto"</span>, <span class="at">size=</span><span class="fl">3.5</span>)<span class="sc">+</span></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data=</span>df_legend, <span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>y, <span class="at">color=</span><span class="fu">I</span>(color)), <span class="at">shape=</span><span class="dv">15</span>, <span class="at">size=</span><span class="dv">6</span>)<span class="sc">+</span></span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">7</span>), <span class="at">expand=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>))<span class="sc">+</span></span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>), <span class="at">expand=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>))<span class="sc">+</span></span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>()<span class="sc">+</span></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="fifa_files/figure-html/unnamed-chunk-40-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="save-the-final-image" class="level2 page-columns page-full" data-number="6.6">
<h2 data-number="6.6" class="anchored" data-anchor-id="save-the-final-image"><span class="header-section-number">6.6</span> Save the final image</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co">#save</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ggsave("fifa_draft.png", bg="white" , height=9, width=9, units="in")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="fifa_draft.png" class="img-fluid figure-img"></p>
<figcaption class="margin-caption">Final image output</figcaption>
</figure>
</div>
<p>This final image is close enough to the original image, and we learnt alot in the process.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>